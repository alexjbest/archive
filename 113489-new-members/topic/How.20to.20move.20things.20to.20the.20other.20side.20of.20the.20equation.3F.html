---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/How.20to.20move.20things.20to.20the.20other.20side.20of.20the.20equation.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20move.20things.20to.20the.20other.20side.20of.20the.20equation.3F.html">How to move things to the other side of the equation?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197189221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20move%20things%20to%20the%20other%20side%20of%20the%20equation%3F/near/197189221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20move.20things.20to.20the.20other.20side.20of.20the.20equation.3F.html#197189221">(May 11 2020 at 18:58)</a>:</h4>
<p>Sorry if this sounds a lot like my question around algebraic transformations. I'm basically struggling and wonder if I'm just approaching it wrong. This is the example. Is there a much better way to write this proof?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">lemma</span> <span class="n">df</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">f</span><span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">f</span><span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="o">(</span><span class="n">f</span><span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)))</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">k</span> <span class="n">l</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f</span><span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">-</span> <span class="n">f</span><span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">b</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span><span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))</span> <span class="bp">-</span> <span class="n">f</span><span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))))</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">intros</span> <span class="n">f</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">intros</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">lhs</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">f</span> <span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="n">l</span><span class="o">)),</span> <span class="k">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">h</span><span class="o">,</span> <span class="n">ring</span> <span class="o">},</span>
    <span class="k">have</span> <span class="n">rhs</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">f</span> <span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="n">l</span><span class="o">)),</span> <span class="k">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">h</span><span class="o">,</span> <span class="n">ring</span> <span class="o">},</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">lhs</span> <span class="n">at</span> <span class="n">rhs</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">eq_add_of_sub_eq</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">b</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">f</span><span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">-</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">f</span><span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">b</span><span class="o">),</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_sub_left_distrib</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">sub_right_comm</span><span class="o">,</span>
    <span class="n">symmetry</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">eq_sub_of_add_eq</span><span class="o">,</span>
    <span class="n">convert</span> <span class="n">rhs</span><span class="o">,</span>
    <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>Up to <code>rw ← lhs at rhs</code>, this is more or less what you'd do on paper. After that it becomes painful and I wonder if there's a better way. I read the whole theorem proving in Lean book and I never found a better.</p>
<p>On paper, you'd just shift the terms from one half of the equation to the other. But the crux is, they aren't rewrites, but completely new separate equations that just happen to be true.</p>
<p>But maybe I'm just doing it wrong trying to use lean as a notebook / CAS when you should only be proving things you've already proved on paper?</p>



<a name="197190596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20move%20things%20to%20the%20other%20side%20of%20the%20equation%3F/near/197190596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/How.20to.20move.20things.20to.20the.20other.20side.20of.20the.20equation.3F.html#197190596">(May 11 2020 at 19:09)</a>:</h4>
<p>First, it took me a while to parse the example. Here's how I would write it:<br>
(I'm looking through the proof now that I understand the statement)</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">df_rewritten</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="bp">ℤ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">fun_eq1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">f</span><span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f</span> <span class="err">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span>
  <span class="o">)</span>
  <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">k</span> <span class="n">l</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">)</span> <span class="o">:</span>
<span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f</span><span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">-</span> <span class="n">f</span><span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">b</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span><span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))</span> <span class="bp">-</span> <span class="n">f</span><span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">apply</span> <span class="n">df</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: May 11 2020 at 19:11 UTC</p>