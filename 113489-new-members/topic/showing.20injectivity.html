---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/showing.20injectivity.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html">showing injectivity</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="195609756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195609756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195609756">(Apr 28 2020 at 18:51)</a>:</h4>
<p>I have a definition of a function using the if-then-else pattern, and I want to break it up into cases based on that definition.  How can I do so?  The context is that I am trying to show a function is injective</p>



<a name="195609814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195609814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195609814">(Apr 28 2020 at 18:52)</a>:</h4>
<p>Here is all I have so far</p>



<a name="195609902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195609902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195609902">(Apr 28 2020 at 18:52)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>


<span class="n">def</span> <span class="n">injective</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x₁</span> <span class="n">x₂</span><span class="o">,</span> <span class="n">f</span> <span class="n">x₁</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x₂</span> <span class="bp">→</span> <span class="n">x₁</span> <span class="bp">=</span> <span class="n">x₂</span>


<span class="n">def</span> <span class="n">range</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">y</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">}</span>


<span class="kn">theorem</span> <span class="n">comp_inj_is_inj</span>
<span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span>
<span class="o">(</span><span class="n">p1</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">p2</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">)</span>
<span class="o">:</span>  <span class="n">injective</span> <span class="o">(</span><span class="n">g</span> <span class="err">∘</span> <span class="n">f</span><span class="o">)</span>
<span class="o">:=</span> <span class="k">begin</span>
  <span class="n">introv</span> <span class="n">x</span> <span class="n">p3</span><span class="o">,</span>
  <span class="n">change</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x₂</span><span class="o">)</span> <span class="n">at</span> <span class="n">p3</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">p1</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">p2</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">p3</span><span class="o">,</span>
<span class="kn">end</span>


<span class="kn">lemma</span> <span class="n">succ_greater_than_nat</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="n">n</span>
<span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_eq_add_one</span><span class="o">,</span>
  <span class="n">linarith</span>
<span class="kn">end</span>


<span class="kn">lemma</span> <span class="n">pred_exists</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">exists</span> <span class="n">k</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">n</span>
<span class="o">:=</span>
<span class="k">begin</span>
<span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
<span class="o">{</span><span class="n">linarith</span><span class="o">,},</span>
<span class="o">{</span>
    <span class="n">existsi</span> <span class="n">d</span><span class="o">,</span>
  <span class="n">refl</span>
<span class="o">}</span>
<span class="kn">end</span>


<span class="c1">-- forgot library function, lifted from square root prime code</span>
<span class="c1">-- credit to github user dm1237</span>
<span class="kn">lemma</span> <span class="n">succ_eq_add_one</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span>
<span class="kn">end</span>

<span class="c1">-- forgot library function</span>
<span class="kn">lemma</span> <span class="n">my_le_trans</span>
<span class="o">(</span><span class="n">j</span> <span class="n">k</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p1</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">(</span><span class="n">p2</span><span class="o">:</span> <span class="n">j</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span>
<span class="o">:</span> <span class="n">j</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span>
<span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span><span class="o">,</span>
  <span class="c1">-- try induction?</span>
  <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>


<span class="kn">lemma</span> <span class="n">inequality_fact</span>
<span class="o">(</span><span class="n">j</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">j</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>

<span class="o">:</span> <span class="n">j</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span>
<span class="o">:=</span> <span class="k">begin</span>
  <span class="n">intros</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>

<span class="c">/-</span><span class="cm">-</span>
<span class="cm">Type of pairs (k,p) where k</span>
<span class="cm">is a natural number and p is a witness to the proof that k &lt; n.</span>
<span class="cm">-/</span>
<span class="n">def</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="err">Σ&#39;</span> <span class="n">k</span><span class="o">,</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">n</span>

<span class="c">/-</span><span class="cm">-</span>
<span class="cm">Every pair that lives in finite_subest m lives in finite_subset n</span>
<span class="cm">where m &lt; n</span>
<span class="cm">-/</span>
<span class="n">def</span> <span class="n">lift_finite</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">finite_subset</span> <span class="n">n</span>
    <span class="o">:=</span> <span class="bp">λ</span> <span class="n">k</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">lt</span><span class="bp">.</span><span class="n">trans</span> <span class="n">k</span><span class="bp">.</span><span class="mi">2</span> <span class="n">p</span><span class="bp">⟩</span>


<span class="c">/-</span><span class="cm">-</span>
<span class="cm">Application of lift_finite from m to m + 1</span>
<span class="cm">-/</span>
<span class="n">def</span> <span class="n">lift_one</span>
<span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">:=</span> <span class="o">(</span><span class="n">lift_finite</span> <span class="n">m</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">succ_greater_than_nat</span> <span class="n">m</span><span class="o">))</span>



<span class="kn">lemma</span> <span class="n">lift_one_fst</span> <span class="o">{</span><span class="n">m</span><span class="o">}</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">lift_one</span> <span class="n">m</span> <span class="n">j</span><span class="o">)</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">j</span><span class="bp">.</span><span class="n">fst</span>
<span class="o">:=</span>
<span class="k">begin</span>
<span class="n">refl</span><span class="o">,</span>

<span class="kn">end</span>



<span class="c">/-</span><span class="cm">-</span>
<span class="cm">The lifting function is injective</span>
<span class="cm">-/</span>
<span class="kn">theorem</span> <span class="n">lift_finite_injective</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
 <span class="n">injective</span> <span class="o">(</span><span class="n">lift_finite</span> <span class="n">m</span> <span class="n">n</span> <span class="n">p</span><span class="o">)</span>
<span class="o">:=</span> <span class="k">begin</span>


<span class="c">/-</span><span class="cm"> pf sketch</span>
<span class="cm">--  suppose f x1 = f x2 = &lt; k, pf: k &lt; n &gt;</span>
<span class="cm">--  we know x1 = &lt; l , pf: k &lt; m &gt; and x2 = &lt; j , pf: j &lt; m &gt;</span>
<span class="cm">--  note that (f x1).1 = (f x2).1 = k</span>
<span class="cm">--  furthermore, k &lt; m &lt; n</span>
<span class="cm">--  then x1 = &lt; k, pf: k &lt; m &gt; = x2</span>
<span class="cm">--  done</span>
<span class="cm">-/</span>

<span class="n">introv</span> <span class="n">x</span> <span class="n">p2</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">x₂</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">p2</span><span class="o">,</span>
<span class="n">refl</span><span class="o">,</span>
<span class="kn">end</span>


<span class="c">/-</span><span class="cm">-</span>
<span class="cm">The lifting from m to m + 1 injective</span>
<span class="cm">-/</span>
<span class="kn">lemma</span> <span class="n">lift_one_injective</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">:</span> <span class="n">injective</span> <span class="o">(</span><span class="n">lift_one</span> <span class="n">m</span><span class="o">)</span>
<span class="o">:=</span> <span class="k">begin</span>
<span class="n">apply</span> <span class="n">lift_finite_injective</span> <span class="n">m</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">succ_greater_than_nat</span> <span class="n">m</span><span class="o">),</span>
<span class="kn">end</span>



<span class="kn">lemma</span> <span class="n">ext_iff</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">↔</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">.</span><span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">rw</span> <span class="n">h</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">cases</span> <span class="n">h</span><span class="o">,</span> <span class="n">refl</span><span class="o">,}</span>
<span class="kn">end</span>



<span class="n">def</span> <span class="n">relabel</span>
<span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="k">if</span> <span class="n">H</span> <span class="o">:</span> <span class="n">j</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="k">then</span> <span class="bp">⟨</span><span class="n">j</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">my_le_trans</span> <span class="n">j</span><span class="bp">.</span><span class="mi">1</span> <span class="n">k</span> <span class="n">m</span> <span class="n">p</span> <span class="n">H</span> <span class="bp">⟩</span> <span class="k">else</span> <span class="bp">⟨</span><span class="n">j</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">inequality_fact</span> <span class="n">j</span><span class="bp">.</span><span class="mi">1</span> <span class="n">m</span> <span class="n">j</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span>


<span class="c">/-</span><span class="cm"></span>
<span class="cm">This formalizes the notion that when f is injective and misses k</span>
<span class="cm">in the codomain then when we relabel to bring m to m - 1,</span>
<span class="cm">composition is injective</span>
<span class="cm">-/</span>
<span class="kn">lemma</span> <span class="n">relabel_with_inj_f_misses_k_is_inj</span>
<span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">(</span><span class="n">f</span><span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">)</span>
<span class="o">(</span><span class="n">inj</span><span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">)</span>
<span class="o">:</span> <span class="n">injective</span> <span class="o">((</span><span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span><span class="o">)</span> <span class="err">∘</span> <span class="n">f</span><span class="o">)</span>
<span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">intros</span><span class="o">,</span>

  <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>


<span class="c1">--proof that f : [m + 2] -&gt; [m + 1] restricted</span>
<span class="c1">--to [m + 1] = {0, 1, ..., m} does not hit f(m + 1)</span>
<span class="kn">lemma</span> <span class="n">miss_proof</span>
<span class="o">{</span><span class="n">m</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">→</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="o">(</span><span class="n">inj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">)</span>
<span class="o">{</span><span class="n">pf</span><span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">}</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="n">j</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="err">∘</span> <span class="n">lift_one</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="n">j</span> <span class="bp">≠</span> <span class="n">f</span> <span class="bp">⟨</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span>  <span class="n">pf</span><span class="bp">⟩</span>
<span class="o">:=</span> <span class="k">begin</span>

<span class="n">introv</span> <span class="n">p</span><span class="o">,</span>
<span class="n">change</span> <span class="n">f</span> <span class="o">(</span><span class="n">lift_one</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">j</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">⟨</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span>  <span class="n">pf</span><span class="bp">⟩</span> <span class="n">at</span> <span class="n">p</span><span class="o">,</span>
<span class="k">let</span> <span class="n">p2</span> <span class="o">:=</span> <span class="n">inj</span> <span class="o">(</span><span class="n">lift_one</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">j</span><span class="o">)</span> <span class="bp">⟨</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span>  <span class="n">pf</span><span class="bp">⟩</span><span class="o">,</span>
<span class="k">let</span> <span class="n">p3</span> <span class="o">:=</span> <span class="n">p2</span> <span class="n">p</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">ext_iff</span> <span class="n">at</span> <span class="n">p3</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">lift_one_fst</span> <span class="n">at</span> <span class="n">p3</span><span class="o">,</span>
<span class="k">let</span> <span class="n">p4</span> <span class="o">:=</span> <span class="n">j</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
<span class="n">linarith</span><span class="o">,</span>

<span class="kn">end</span>




<span class="kn">lemma</span> <span class="n">relabel_inj</span>
<span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">(</span><span class="n">f</span><span class="o">:</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">→</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="o">(</span><span class="n">inj</span><span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">)</span>
<span class="o">{</span><span class="n">pf</span><span class="o">}</span> <span class="o">(</span><span class="n">miss</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">j</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="err">∘</span> <span class="n">lift_one</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="n">j</span> <span class="bp">≠</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span>  <span class="n">pf</span><span class="bp">⟩</span> <span class="o">)</span>
<span class="o">:</span> <span class="n">injective</span> <span class="o">((</span><span class="n">relabel</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">k</span> <span class="n">pf</span><span class="o">)</span> <span class="err">∘</span> <span class="n">f</span> <span class="err">∘</span> <span class="n">lift_one</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">introv</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">x₂</span><span class="o">,</span>
  <span class="n">intros</span><span class="o">,</span>
  <span class="n">change</span> <span class="o">(</span><span class="n">relabel</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">k</span> <span class="n">pf</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">lift_one</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="o">)))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">relabel</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">k</span> <span class="n">pf</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">lift_one</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">x₂</span><span class="o">)))</span> <span class="n">at</span> <span class="n">a</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">x_l</span> <span class="o">:=</span> <span class="o">(</span><span class="n">lift_one</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">y_l</span> <span class="o">:=</span> <span class="o">(</span><span class="n">lift_one</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">x₂</span><span class="o">),</span>
  <span class="n">change</span> <span class="n">relabel</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">k</span> <span class="n">pf</span> <span class="o">(</span><span class="n">f</span> <span class="n">x_l</span><span class="o">)</span> <span class="bp">=</span> <span class="n">relabel</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">k</span> <span class="n">pf</span> <span class="o">(</span><span class="n">f</span> <span class="n">y_l</span><span class="o">)</span> <span class="n">at</span> <span class="n">a</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">r_x_l</span> <span class="o">:=</span> <span class="n">relabel</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">k</span> <span class="n">pf</span> <span class="o">(</span><span class="n">f</span> <span class="n">x_l</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">r_y_l</span> <span class="o">:=</span> <span class="n">relabel</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">k</span> <span class="n">pf</span> <span class="o">(</span><span class="n">f</span> <span class="n">y_l</span><span class="o">),</span>
  <span class="n">change</span> <span class="n">r_x_l</span> <span class="bp">=</span> <span class="n">r_y_l</span> <span class="n">at</span> <span class="n">a</span><span class="o">,</span>

  <span class="n">sorry</span><span class="o">,</span>

<span class="kn">end</span>



<span class="c">/-</span><span class="cm">-</span>
<span class="cm">Pigeonhole principle, induction on n</span>
<span class="cm">-/</span>
<span class="kn">theorem</span> <span class="n">pigeonhole_principle</span>
    <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">)</span>
<span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="bp">&gt;</span> <span class="n">m</span><span class="o">)</span> <span class="bp">→</span> <span class="bp">¬</span><span class="o">(</span><span class="n">injective</span> <span class="n">f</span><span class="o">)</span>
<span class="o">:=</span> <span class="k">begin</span>

  <span class="n">intros</span> <span class="n">n_gt_m</span> <span class="n">f_injective</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">linarith</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> case d = 0 -/</span> <span class="o">},</span>


  <span class="k">let</span> <span class="n">g</span> <span class="o">:=</span> <span class="n">f</span> <span class="err">∘</span> <span class="o">(</span><span class="n">lift_one</span> <span class="n">d</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">hd&#39;</span> <span class="o">:=</span> <span class="n">hd</span> <span class="n">g</span><span class="o">,</span>

  <span class="n">rcases</span> <span class="n">lt_or_eq_of_le</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">lt_succ_iff</span><span class="bp">.</span><span class="mi">1</span> <span class="n">n_gt_m</span><span class="o">)</span> <span class="k">with</span> <span class="n">h</span> <span class="bp">|</span> <span class="n">rfl</span><span class="o">,</span>

  <span class="o">{</span>   <span class="c">/-</span><span class="cm"> case where d &gt; m -/</span>
      <span class="c">/-</span><span class="cm"> prove injective g -/</span>
    <span class="n">apply</span> <span class="n">hd&#39;</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">g_injective</span> <span class="o">:=</span> <span class="n">comp_inj_is_inj</span> <span class="o">(</span><span class="n">lift_one</span> <span class="n">d</span><span class="o">)</span> <span class="n">f</span> <span class="o">(</span><span class="n">lift_one_injective</span> <span class="n">d</span><span class="o">)</span> <span class="n">f_injective</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">g_injective</span><span class="o">,</span>
  <span class="o">},</span>

  <span class="o">{</span>   <span class="c">/-</span><span class="cm"> case where d = m -/</span>
      <span class="c">/-</span><span class="cm"> prove f : finite_subset (nat.succ m) → finite_subset m is not injective -/</span>

    <span class="n">induction</span> <span class="n">m</span> <span class="k">with</span> <span class="n">l</span> <span class="n">hl</span><span class="o">,</span>

    <span class="o">{</span>
      <span class="k">let</span> <span class="n">e</span><span class="o">:=</span> <span class="n">f</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span><span class="bp">_</span> <span class="bp">⟩</span><span class="o">,</span>
      <span class="k">let</span> <span class="n">e2</span> <span class="o">:=</span> <span class="n">e</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
      <span class="n">linarith</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">n_gt_m</span><span class="o">,</span>
    <span class="o">},</span>


    <span class="k">let</span> <span class="n">k</span> <span class="o">:=</span> <span class="n">f</span> <span class="bp">⟨</span><span class="n">l</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">succ_greater_than_nat</span> <span class="o">(</span><span class="n">l</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">⟩</span><span class="o">,</span> <span class="c1">-- let k = f(l + 1)</span>
    <span class="k">let</span> <span class="n">violator</span> <span class="o">:=</span> <span class="n">f</span> <span class="err">∘</span> <span class="o">(</span><span class="n">lift_one</span> <span class="o">(</span><span class="n">l</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)),</span>
    <span class="k">let</span> <span class="n">restriction</span> <span class="o">:=</span> <span class="o">(</span><span class="n">relabel</span> <span class="o">(</span><span class="n">l</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">k</span><span class="bp">.</span><span class="mi">1</span> <span class="n">k</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span> <span class="err">∘</span> <span class="n">violator</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">violator_is_inj</span> <span class="o">:=</span> <span class="n">comp_inj_is_inj</span> <span class="o">(</span><span class="n">lift_one</span> <span class="o">(</span><span class="n">l</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="n">f</span> <span class="o">(</span><span class="n">lift_one_injective</span> <span class="o">(</span><span class="n">l</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="n">f_injective</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">res_is_inj</span> <span class="o">:=</span> <span class="n">relabel_with_inj_f_misses_k_is_inj</span> <span class="o">(</span><span class="n">l</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">k</span><span class="bp">.</span><span class="mi">1</span> <span class="n">k</span><span class="bp">.</span><span class="mi">2</span> <span class="n">violator</span> <span class="n">violator_is_inj</span><span class="o">,</span>
    <span class="c">/-</span><span class="cm"> contradiction, since restriction: [m] →  [m - 1] is injective,</span>
<span class="cm">     but this can&#39;t be true IH</span>
<span class="cm">     -/</span>
    <span class="n">refine</span> <span class="n">hl</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">,</span>
    <span class="o">{</span>
      <span class="n">intros</span><span class="o">,</span>
      <span class="n">linarith</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
      <span class="n">exact</span> <span class="n">restriction</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
      <span class="n">exact</span> <span class="n">succ_greater_than_nat</span> <span class="bp">_</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
      <span class="n">exact</span> <span class="n">res_is_inj</span><span class="o">,</span>
    <span class="o">},</span>

  <span class="o">}</span>

<span class="kn">end</span>
</code></pre></div>



<a name="195609961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195609961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195609961">(Apr 28 2020 at 18:53)</a>:</h4>
<p>I am trying to prove <code>relabel_inj</code>.  It uses the definition of <code>relabel</code>.</p>



<a name="195610365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195610365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195610365">(Apr 28 2020 at 18:57)</a>:</h4>
<p>Should I cut down the size of the code block?</p>



<a name="195611566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195611566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195611566">(Apr 28 2020 at 19:08)</a>:</h4>
<p>I tried cases but that seems to come from if I do induction on k?</p>



<a name="195611603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195611603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195611603">(Apr 28 2020 at 19:08)</a>:</h4>
<p>Try the <code>split_ifs</code> tactic</p>



<a name="195611717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195611717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195611717">(Apr 28 2020 at 19:09)</a>:</h4>
<p>so <code>split_ifs at a</code>, where <code>a : relabel (m + 1) k pf (f x_l) = relabel (m + 1) k pf (f y_l)</code>?</p>



<a name="195611805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195611805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195611805">(Apr 28 2020 at 19:09)</a>:</h4>
<p>I'm getting this error:</p>
<div class="codehilite"><pre><span></span><code><span class="n">no</span> <span class="k">if</span><span class="bp">-</span><span class="k">then</span><span class="bp">-</span><span class="k">else</span> <span class="n">expressions</span> <span class="n">to</span> <span class="n">split</span>
</code></pre></div>



<a name="195611855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195611855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195611855">(Apr 28 2020 at 19:10)</a>:</h4>
<p>I think this lemma will benefit from some strategic planning and maybe writing out a proof on paper first.</p>



<a name="195611867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195611867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195611867">(Apr 28 2020 at 19:10)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#split_ifs" title="https://leanprover-community.github.io/mathlib_docs/tactics.html#split_ifs">https://leanprover-community.github.io/mathlib_docs/tactics.html#split_ifs</a></p>



<a name="195611881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195611881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195611881">(Apr 28 2020 at 19:10)</a>:</h4>
<p>I did write out a proof on paper</p>



<a name="195611899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195611899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195611899">(Apr 28 2020 at 19:10)</a>:</h4>
<p>Okay, what did you do at this point then?</p>



<a name="195612025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612025">(Apr 28 2020 at 19:11)</a>:</h4>
<p>There is a better way to go about this than forging ahead with case splits here--I don't know whether it is a "spoiler" though.</p>



<a name="195612028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612028">(Apr 28 2020 at 19:11)</a>:</h4>
<p>at this point, I split the proof into two cases based on the definition of <code>relabel</code>.  Either the RHS = LHS ≤ k or RHS = LHS &gt; k</p>



<a name="195612129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612129">(Apr 28 2020 at 19:12)</a>:</h4>
<p>then, by <code>miss_proof</code>, we know that RHS = LHS != k</p>



<a name="195612157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612157">(Apr 28 2020 at 19:12)</a>:</h4>
<p>So you are splitting based on the <em>output</em> of <code>relabel</code>?</p>



<a name="195612167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612167">(Apr 28 2020 at 19:12)</a>:</h4>
<p>yes</p>



<a name="195612180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612180">(Apr 28 2020 at 19:12)</a>:</h4>
<p>Okay, that is better than what I thought you were intending, but not what <code>split_if</code>s does.</p>



<a name="195612217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612217">(Apr 28 2020 at 19:13)</a>:</h4>
<p>Still, I think breaking things down into more lemmas would help.</p>



<a name="195612360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612360">(Apr 28 2020 at 19:14)</a>:</h4>
<p>then I should be able to conclude that either <code>f x_l = f y_l</code> or <code>(&lt; (f x_1) - 1,  (f x_1).snd  &gt;) = (&lt; (f y_1) - 1,  (f y_1).snd  &gt;)</code>, both of which would give me that <code>x = y</code> by injectivity of <code>lift_one</code> and <code>f</code></p>



<a name="195612444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612444">(Apr 28 2020 at 19:15)</a>:</h4>
<p>I'm not sure how to split this into lemmas, or at least it isn't _immediately_ obvious to me how to do so</p>



<a name="195612454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612454">(Apr 28 2020 at 19:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="283719">Adeeb K</span> <a href="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195612129" title="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195612129">said</a>:</p>
<blockquote>
<p>then, by <code>miss_proof</code>, we know that RHS = LHS != k</p>
</blockquote>
<p>Actually, this is not true, is it?</p>



<a name="195612487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612487">(Apr 28 2020 at 19:15)</a>:</h4>
<p>It should be by <code>miss_proof</code> we gave earlier</p>



<a name="195612587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612587">(Apr 28 2020 at 19:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="283719">Adeeb K</span> <a href="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195612360" title="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195612360">said</a>:</p>
<blockquote>
<p>then I should be able to conclude that either <code>f x_l = f y_l</code> or <code>(&lt; (f x_1) - 1,  (f x_1).snd  &gt;) = (&lt; (f y_1) - 1,  (f y_1).snd  &gt;)</code>, both of which would give me that <code>x = y</code> by injectivity of <code>lift_one</code> and <code>f</code></p>
</blockquote>
<p>How do you know that both <code>f x_1</code> and <code>f y_1</code> fall into the same case of <code>relabel</code>?</p>



<a name="195612624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612624">(Apr 28 2020 at 19:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="283719">Adeeb K</span> <a href="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195612487" title="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195612487">said</a>:</p>
<blockquote>
<p>It should be by <code>miss_proof</code> we gave earlier</p>
</blockquote>
<p>But this is about the input of <code>relabel</code>, not the output of <code>relabel</code>.</p>



<a name="195612628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612628">(Apr 28 2020 at 19:16)</a>:</h4>
<p>this whole proof to show that the composition is injective is to lead up to a contradiction in pigeonhole principle - I end up getting this whole thing is an injective function from <code>[m + 1]</code> to <code>[m]</code> which is a contradiction according to my inductive hypothesis</p>



<a name="195612651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612651">(Apr 28 2020 at 19:16)</a>:</h4>
<p>because <code>f x_1 = f y_1</code></p>



<a name="195612713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612713">(Apr 28 2020 at 19:17)</a>:</h4>
<p>by injectivity of <code>lift_one</code> and <code>f</code> right?</p>



<a name="195612722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612722">(Apr 28 2020 at 19:17)</a>:</h4>
<p>Wait, that's what you're trying to prove.</p>



<a name="195612751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612751">(Apr 28 2020 at 19:17)</a>:</h4>
<p>right right</p>



<a name="195612851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612851">(Apr 28 2020 at 19:18)</a>:</h4>
<p>but by the definition of relabel, they have to either be &lt;= k or &gt; k right?  You can't be &lt;= k and &gt; k at the same time</p>



<a name="195612856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612856">(Apr 28 2020 at 19:18)</a>:</h4>
<p>How do you know, for example, that <code>relabel 100 7 _ 3</code> isn't equal to <code>relabel 100 7 _ 21</code>.</p>



<a name="195612944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612944">(Apr 28 2020 at 19:19)</a>:</h4>
<p>but wouldn't that imply that 2 = 20?</p>



<a name="195612949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612949">(Apr 28 2020 at 19:19)</a>:</h4>
<p>Well, of course it's because <code>3</code> doesn't equal <code>20</code> but you have to consider this case and really use the definition of <code>relabel</code> somehow.</p>



<a name="195612990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195612990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195612990">(Apr 28 2020 at 19:19)</a>:</h4>
<p>oh, so this means I should introduce a lemma</p>



<a name="195613107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613107">(Apr 28 2020 at 19:20)</a>:</h4>
<p>So I think this means in your paper proof you are implicitly assuming something which is "obvious" about the behavior of <code>relabel</code>, and you should figure out what it is and formulate it as a lemma.</p>



<a name="195613137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613137">(Apr 28 2020 at 19:20)</a>:</h4>
<p>if (relabel m k p) x = (relabel m k p) y<br>
then x, y &lt;= k or x, y &gt; k</p>



<a name="195613326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613326">(Apr 28 2020 at 19:22)</a>:</h4>
<p>suppose not - then WLOG there exists x, y such that x &lt;= k and y &gt; k, but then ((relabel m k p) x).1 = x - 1 &lt; k &lt;= y = ((relabel m k p) y).2</p>



<a name="195613338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613338">(Apr 28 2020 at 19:22)</a>:</h4>
<p>contradiction, so no such pair exist?</p>



<a name="195613382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613382">(Apr 28 2020 at 19:22)</a>:</h4>
<p>though I made a leap here</p>



<a name="195613436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613436">(Apr 28 2020 at 19:23)</a>:</h4>
<p>I assumed then x, y &lt;= k or x, y &gt; k if and only if !(x &lt;= k and y &gt; k)</p>



<a name="195613444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613444">(Apr 28 2020 at 19:23)</a>:</h4>
<p>This is not the correct formula for <code>relabel</code></p>



<a name="195613624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613624">(Apr 28 2020 at 19:25)</a>:</h4>
<p>It is a good general direction though.</p>



<a name="195613802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613802">(Apr 28 2020 at 19:26)</a>:</h4>
<p>what's not the correct formula?</p>



<a name="195613815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613815">(Apr 28 2020 at 19:27)</a>:</h4>
<p>oh, the way I split it up?</p>



<a name="195613818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613818">(Apr 28 2020 at 19:27)</a>:</h4>
<p>((relabel m k p) x).1 = x - 1 &lt; k &lt;= y = ((relabel m k p) y).2</p>



<a name="195613837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613837">(Apr 28 2020 at 19:27)</a>:</h4>
<p>oh right right</p>



<a name="195613842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613842">(Apr 28 2020 at 19:27)</a>:</h4>
<p>other way around</p>



<a name="195613921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613921">(Apr 28 2020 at 19:28)</a>:</h4>
<p>((relabel m k p) x).1 = x  &lt;= k &lt;= y = ((relabel m k p) y).2<br>
which means either ((relabel m k p) x).1 &lt; ((relabel m k p) y).2, contradiction</p>



<a name="195613954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195613954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195613954">(Apr 28 2020 at 19:28)</a>:</h4>
<p>or ((relabel m k p) x).1 = ((relabel m k p) y).2 = k, contradiction by <code>miss_proof</code></p>



<a name="195614949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195614949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195614949">(Apr 28 2020 at 19:36)</a>:</h4>
<p>I wrote down the statement of the lemma:</p>



<a name="195614967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195614967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195614967">(Apr 28 2020 at 19:36)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">relabel_behavior</span>
<span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">{</span><span class="n">pf</span><span class="o">}</span> <span class="o">(</span><span class="n">miss</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">j</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">,</span> <span class="o">(</span><span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span><span class="o">)</span> <span class="n">j</span> <span class="bp">≠</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span>  <span class="n">pf</span><span class="bp">⟩</span> <span class="o">)</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">&gt;</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">&gt;</span> <span class="n">k</span><span class="o">)</span>
<span class="o">:=</span>
<span class="k">begin</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="195615034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195615034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195615034">(Apr 28 2020 at 19:37)</a>:</h4>
<p>Not sure how to translate the proof above into lean - I imagine it would use a lot of transitivity of inequalities?</p>



<a name="195615316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195615316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195615316">(Apr 28 2020 at 19:39)</a>:</h4>
<p>Well this lemma is true but useless, because <code>miss</code> is just false.</p>



<a name="195615371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195615371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195615371">(Apr 28 2020 at 19:40)</a>:</h4>
<p>it is?</p>



<a name="195615731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195615731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195615731">(Apr 28 2020 at 19:43)</a>:</h4>
<p>wait, how?  If I have an injective function <code>f</code> from <code>{0, 1, ..., m + 1}</code> to <code>{0, 1, ..., m }</code> (no such function exists, but this is a lemma that helps me set up the conclusion to pigeonhole by assuming such an injective function exists in the first place), and I restrict my domain to <code>{0, 1, ..., m }</code> instead, then there is no element in the domain that will equal <code>f(m + 1)</code> since <code>f</code> is injective</p>



<a name="195615785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195615785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195615785">(Apr 28 2020 at 19:43)</a>:</h4>
<p>There is no <code>f</code> in the statement of <code>relabel_behavior</code>.</p>



<a name="195615819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195615819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195615819">(Apr 28 2020 at 19:43)</a>:</h4>
<p>oh right..</p>



<a name="195615846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195615846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195615846">(Apr 28 2020 at 19:44)</a>:</h4>
<p>But, something like it is true and useful.</p>



<a name="195615976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195615976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195615976">(Apr 28 2020 at 19:44)</a>:</h4>
<p>I'm not sure I see it?</p>



<a name="195615988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195615988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195615988">(Apr 28 2020 at 19:44)</a>:</h4>
<p>Adeeb, it seems you should think much more seriously about the proof on paper.</p>



<a name="195616219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195616219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195616219">(Apr 28 2020 at 19:46)</a>:</h4>
<p>I (believe) I understand the proof, but there are a bunch of steps I think I didn't write out explicitly since they felt ''obvious''</p>



<a name="195616259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195616259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195616259">(Apr 28 2020 at 19:46)</a>:</h4>
<p>But you're here to unlearn that feeling, right?</p>



<a name="195616285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195616285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195616285">(Apr 28 2020 at 19:47)</a>:</h4>
<p>yes</p>



<a name="195616344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195616344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195616344">(Apr 28 2020 at 19:47)</a>:</h4>
<p>Patrick, you make it sound like The Matrix</p>



<a name="195616474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195616474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195616474">(Apr 28 2020 at 19:48)</a>:</h4>
<p>Lean: the red pill.</p>



<a name="195616483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195616483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195616483">(Apr 28 2020 at 19:48)</a>:</h4>
<p>Okay, so <code>miss</code> is not true simply because if <code>k &lt; m - 1</code> then <code>k + 1 &lt; m</code>, which means that there is in fact an element for which <code>relabel m k p j = &lt;k, pf&gt;</code></p>



<a name="195616655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195616655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195616655">(Apr 28 2020 at 19:50)</a>:</h4>
<p>and I probably don't really care about <code>miss</code> in the first place</p>



<a name="195616709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195616709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195616709">(Apr 28 2020 at 19:50)</a>:</h4>
<p>what I care about is showing that either <code>x, y &lt;= k</code> or <code>x, y &gt; k</code></p>



<a name="195616854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195616854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195616854">(Apr 28 2020 at 19:51)</a>:</h4>
<p>So what I have now is:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">relabel_behavior</span>
<span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">&gt;</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">&gt;</span> <span class="n">k</span><span class="o">)</span>
<span class="o">:=</span>
<span class="k">begin</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="195617005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195617005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195617005">(Apr 28 2020 at 19:52)</a>:</h4>
<p>is this the full 'useful' statement, or is there another detail I'm missing?</p>



<a name="195617038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195617038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195617038">(Apr 28 2020 at 19:52)</a>:</h4>
<p>wait wait wait one second</p>



<a name="195617124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195617124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195617124">(Apr 28 2020 at 19:53)</a>:</h4>
<p>sorry I meant this:</p>



<a name="195617147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195617147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195617147">(Apr 28 2020 at 19:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">relabel_behavior</span>
<span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">,</span>
<span class="o">(</span><span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span><span class="o">)</span> <span class="n">y</span>
<span class="bp">→</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">&gt;</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">&gt;</span> <span class="n">k</span><span class="o">)</span>
<span class="o">:=</span>
<span class="k">begin</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="195617266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195617266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195617266">(Apr 28 2020 at 19:54)</a>:</h4>
<p>It's getting closer but still not correct.</p>



<a name="195617350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195617350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195617350">(Apr 28 2020 at 19:54)</a>:</h4>
<p>is there something I'm missing or am I asserting something that's too strong?</p>



<a name="195617599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195617599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195617599">(Apr 28 2020 at 19:56)</a>:</h4>
<p>Does the statement look true to you? Forget about the pigeonhole proof.</p>



<a name="195617831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195617831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195617831">(Apr 28 2020 at 19:58)</a>:</h4>
<p>uh I think it probably doesn't match the way I have relabel defined</p>



<a name="195617849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195617849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195617849">(Apr 28 2020 at 19:58)</a>:</h4>
<p>so it would be better like this:</p>



<a name="195617934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195617934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195617934">(Apr 28 2020 at 19:58)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">relabel_behavior</span>
<span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">,</span>
<span class="o">(</span><span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span><span class="o">)</span> <span class="n">y</span>
<span class="bp">→</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≥</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≥</span> <span class="n">k</span><span class="o">)</span>
<span class="o">:=</span>
<span class="k">begin</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="195618030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195618030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195618030">(Apr 28 2020 at 19:59)</a>:</h4>
<p>is this closer?</p>



<a name="195618306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195618306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195618306">(Apr 28 2020 at 20:00)</a>:</h4>
<p>which is really 3 cases?</p>



<a name="195618629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195618629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195618629">(Apr 28 2020 at 20:02)</a>:</h4>
<p>Is there something really big and obvious that I'm missing, or is it more subtle?</p>



<a name="195618694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195618694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195618694">(Apr 28 2020 at 20:03)</a>:</h4>
<p>I think it is okay now.</p>



<a name="195618863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195618863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195618863">(Apr 28 2020 at 20:04)</a>:</h4>
<p>alright, cool!  Then...I'm not sure how to start after maybe an <code>intros</code> or <code>introv</code></p>



<a name="195619555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195619555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195619555">(Apr 28 2020 at 20:08)</a>:</h4>
<p>I <code>introv p</code>, which gives me the following window:</p>



<a name="195619599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195619599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195619599">(Apr 28 2020 at 20:08)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="mi">1</span> <span class="n">goal</span>
<span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">p</span> <span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">,</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">,</span>
<span class="n">p</span> <span class="o">:</span> <span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span> <span class="n">y</span>
<span class="err">⊢</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">∨</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≥</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≥</span> <span class="n">k</span>
</code></pre></div>



<a name="195619635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195619635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195619635">(Apr 28 2020 at 20:09)</a>:</h4>
<p>how can I split the goal?</p>



<a name="195620599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195620599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195620599">(Apr 28 2020 at 20:15)</a>:</h4>
<p>actually, I'm sort of lost as to how I would get cases to examine the <code>relabel m k p x</code> in the first place</p>



<a name="195623473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195623473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195623473">(Apr 28 2020 at 20:36)</a>:</h4>
<p>wait, would split_ifs help me here to split the goal or split the cases for relabel's output?</p>



<a name="195624074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624074">(Apr 28 2020 at 20:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="283719">Adeeb K</span> <a href="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195619635" title="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195619635">said</a>:</p>
<blockquote>
<p>how can I split the goal?</p>
</blockquote>
<p>Have you read <a href="https://leanprover.github.io/theorem_proving_in_lean/" title="https://leanprover.github.io/theorem_proving_in_lean/">Theorem Proving In Lean</a> or played the <a href="http://wwwf.imperial.ac.uk/~buzzard/xena/natural_number_game/" title="http://wwwf.imperial.ac.uk/~buzzard/xena/natural_number_game/">natural number game</a>? If you don't know what to do with a goal which is just logical connectives and propositions then perhaps you've bitten off more than you can chew.</p>



<a name="195624350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624350">(Apr 28 2020 at 20:45)</a>:</h4>
<p>Well, I don't think the NNG covers <code>if</code>, does it?</p>



<a name="195624443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624443">(Apr 28 2020 at 20:46)</a>:</h4>
<p>I thought the question was what to do with <code>x.fst ≤ k ∧ y.fst ≤ k ∨ x.fst ≥ k ∧ y.fst ≥ k</code>?</p>



<a name="195624586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624586">(Apr 28 2020 at 20:47)</a>:</h4>
<p>Well, I'm sort of asking about both.  I'm wondering how I can split up <code>relabel m k p x</code> into cases for its output</p>



<a name="195624592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624592">(Apr 28 2020 at 20:47)</a>:</h4>
<p><span class="user-mention" data-user-id="283719">@Adeeb K</span> if you read <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#split_ifs" title="https://leanprover-community.github.io/mathlib_docs/tactics.html#split_ifs">the documentation for <code>split_ifs</code></a> you will see exactly what it does.</p>



<a name="195624629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624629">(Apr 28 2020 at 20:47)</a>:</h4>
<p>as for <code>x.fst ≤ k ∧ y.fst ≤ k ∨ x.fst ≥ k ∧ y.fst ≥ k</code> I'll do more of the natural number game - I think I got 3-4 worlds in my last time</p>



<a name="195624659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624659">(Apr 28 2020 at 20:47)</a>:</h4>
<p>In particular, <code>split_ifs</code> will only work if it can see an <code>if</code></p>



<a name="195624748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624748">(Apr 28 2020 at 20:48)</a>:</h4>
<p>and I should be able to apply it to a statement that isn't the goal?</p>



<a name="195624767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624767">(Apr 28 2020 at 20:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195624592" title="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195624592">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="283719">Adeeb K</span> if you read <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#split_ifs" title="https://leanprover-community.github.io/mathlib_docs/tactics.html#split_ifs">the documentation for <code>split_ifs</code></a> you will see exactly what it does.</p>
</blockquote>



<a name="195624830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624830">(Apr 28 2020 at 20:49)</a>:</h4>
<p>but I keep getting errors when I do so..</p>



<a name="195624874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195624874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195624874">(Apr 28 2020 at 20:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195624659" title="#narrow/stream/113489-new-members/topic/showing.20injectivity/near/195624659">said</a>:</p>
<blockquote>
<p>In particular, <code>split_ifs</code> will only work if it can see an <code>if</code></p>
</blockquote>



<a name="195625125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195625125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195625125">(Apr 28 2020 at 20:51)</a>:</h4>
<p>relabel is defined with an if-then-else and starts with an if.  Do you mean I have to manually put the if into my expression?</p>



<a name="195625326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195625326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195625326">(Apr 28 2020 at 20:52)</a>:</h4>
<p>Yes, it really need to be able to see an if. Can you unfold?</p>



<a name="195625482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195625482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195625482">(Apr 28 2020 at 20:54)</a>:</h4>
<p>Some tactics work up to definitional equality, and some up to syntactic equality. In other words, some tactics will be fine if what you point them at is equal by definition to what they're expecting (e.g. <code>exact</code>) but others will only work if what you point them at is literally the string of characters they are expecting (e.g. <code>rw</code> or <code>split_ifs</code>).</p>



<a name="195625489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195625489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195625489">(Apr 28 2020 at 20:54)</a>:</h4>
<p>I get an error for the simplify tactic failing to simplify when I <code>unfold at p2</code></p>



<a name="195625517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195625517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195625517">(Apr 28 2020 at 20:54)</a>:</h4>
<p><code>unfold at p2</code> doesn't make any sense</p>



<a name="195625558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195625558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195625558">(Apr 28 2020 at 20:54)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#unfold" title="https://leanprover-community.github.io/mathlib_docs/tactics.html#unfold">https://leanprover-community.github.io/mathlib_docs/tactics.html#unfold</a></p>



<a name="195625813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195625813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195625813">(Apr 28 2020 at 20:56)</a>:</h4>
<p>okay, I just read through <code>unfold</code>.  I'm not sure how to use it in this case, or what my constants as arguments would be in this case.</p>



<a name="195626028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195626028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195626028">(Apr 28 2020 at 20:58)</a>:</h4>
<p>What is <code>p2</code>?</p>



<a name="195626073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195626073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195626073">(Apr 28 2020 at 20:58)</a>:</h4>
<p><code>p2 : relabel m k p x = relabel m k p y</code></p>



<a name="195626088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195626088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195626088">(Apr 28 2020 at 20:59)</a>:</h4>
<p>Did you mean <code>unfold relabel at p2</code>?</p>



<a name="195626189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195626189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195626189">(Apr 28 2020 at 20:59)</a>:</h4>
<p>The documentation is written in such jargon that someone who understands it would probably already know how to use <code>unfold</code>.<br>
More useful would be an example or links to TPIL or similar.</p>



<a name="195626296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195626296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195626296">(Apr 28 2020 at 21:00)</a>:</h4>
<p>oh, that makes sense<br>
sorry I wasn't seeing it earlier..</p>



<a name="195626381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195626381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195626381">(Apr 28 2020 at 21:01)</a>:</h4>
<p>Yes, the documentation is a bit crappy for unfold :-/</p>



<a name="195626425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195626425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195626425">(Apr 28 2020 at 21:01)</a>:</h4>
<p>The core tactics were only recently documented.</p>



<a name="195627186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195627186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195627186">(Apr 28 2020 at 21:07)</a>:</h4>
<p>[makes a note to PR better docs for <code>unfold</code>]</p>



<a name="195627928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195627928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195627928">(Apr 28 2020 at 21:14)</a>:</h4>
<p>thanks again</p>



<a name="195627940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195627940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195627940">(Apr 28 2020 at 21:14)</a>:</h4>
<p>I'll chew on some of the cases before asking for help with the main theorem</p>



<a name="195644640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195644640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195644640">(Apr 29 2020 at 00:05)</a>:</h4>
<p>okay right now I have two cases: <code>nat.sub k 0 &lt; x.fst</code> and <code>nat.sub k 0 = x.fst</code></p>



<a name="195644654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195644654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195644654">(Apr 29 2020 at 00:05)</a>:</h4>
<p>suppose <code>p : nat.sub k 0 &lt; x.fst</code>.  Is there a tactic that lets me conclude <code>k &lt; x.fst</code>?</p>



<a name="195644931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195644931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195644931">(Apr 29 2020 at 00:08)</a>:</h4>
<p><code>rw nat.sub_zero at p</code></p>



<a name="195645366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645366">(Apr 29 2020 at 00:15)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">rewrite</span> <span class="n">tactic</span> <span class="n">failed</span><span class="o">,</span> <span class="n">did</span> <span class="n">not</span> <span class="n">find</span> <span class="kn">instance</span> <span class="n">of</span> <span class="n">the</span> <span class="n">pattern</span> <span class="k">in</span> <span class="n">the</span> <span class="n">target</span> <span class="n">expression</span>
  <span class="err">?</span><span class="n">m_1</span> <span class="bp">-</span> <span class="mi">0</span>
</code></pre></div>



<a name="195645373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645373">(Apr 29 2020 at 00:15)</a>:</h4>
<p><code>erw nat.sub_zero at p</code></p>



<a name="195645441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645441">(Apr 29 2020 at 00:16)</a>:</h4>
<p>it still has the same error</p>



<a name="195645455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645455">(Apr 29 2020 at 00:16)</a>:</h4>
<p><code>change k - 0 &lt; x.1 at p; rw nat.sub_zero at p</code></p>



<a name="195645483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645483">(Apr 29 2020 at 00:17)</a>:</h4>
<p>actually</p>



<a name="195645484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645484">(Apr 29 2020 at 00:17)</a>:</h4>
<p><code>change k &lt; x.1 at p</code></p>



<a name="195645650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645650">(Apr 29 2020 at 00:20)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="k">match</span> <span class="n">failed</span>
</code></pre></div>



<a name="195645663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645663">(Apr 29 2020 at 00:20)</a>:</h4>
<p>I have <em>no</em> idea what's going on..</p>



<a name="195645665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645665">(Apr 29 2020 at 00:20)</a>:</h4>
<p>MWE</p>



<a name="195645671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645671">(Apr 29 2020 at 00:20)</a>:</h4>
<p>sure thing</p>



<a name="195645768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645768">(Apr 29 2020 at 00:22)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">lemma</span> <span class="n">inequality_fact</span>
<span class="o">(</span><span class="n">j</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">j</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>

<span class="o">:</span> <span class="n">j</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span>
<span class="o">:=</span> <span class="k">begin</span>
  <span class="n">intros</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">ext_iff</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">↔</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">.</span><span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">rw</span> <span class="n">h</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">cases</span> <span class="n">h</span><span class="o">,</span> <span class="n">refl</span><span class="o">,}</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">relabel_behavior</span>
<span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">,</span>
<span class="o">(</span><span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span><span class="o">)</span> <span class="n">y</span>
<span class="bp">→</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≥</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≥</span> <span class="n">k</span><span class="o">)</span>
<span class="o">:=</span>
<span class="k">begin</span>
<span class="n">introv</span> <span class="n">p2</span><span class="o">,</span>
<span class="n">unfold</span> <span class="n">relabel</span> <span class="n">at</span> <span class="n">p2</span><span class="o">,</span>
<span class="n">split_ifs</span> <span class="n">at</span> <span class="n">p2</span><span class="o">,</span>
<span class="o">{</span> <span class="n">left</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h_1</span><span class="o">,</span>
<span class="o">},</span>


<span class="o">{</span>
  <span class="n">right</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>

  <span class="o">{</span>
    <span class="n">cases</span> <span class="n">lt_or_eq_of_le</span> <span class="n">h</span><span class="o">,</span>
    <span class="o">{</span>
      <span class="k">let</span> <span class="n">q</span> <span class="o">:=</span> <span class="n">le_of_not_ge</span> <span class="n">h_1</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">lt_or_eq_of_le</span> <span class="n">q</span><span class="o">,</span>

      <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span>
        <span class="k">let</span> <span class="n">h4</span> <span class="o">:=</span> <span class="n">inequality_fact</span> <span class="n">k</span> <span class="n">y</span><span class="bp">.</span><span class="n">fst</span> <span class="n">h_3</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">ext_iff</span> <span class="n">at</span> <span class="n">p2</span><span class="o">,</span>
        <span class="n">change</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">y</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">-</span> <span class="mi">1</span> <span class="n">at</span> <span class="n">p2</span><span class="o">,</span>
        <span class="k">let</span> <span class="n">p2refl</span> <span class="o">:=</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">p2</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">p2refl</span> <span class="n">at</span> <span class="n">h4</span><span class="o">,</span>
        <span class="k">let</span> <span class="n">rw_h4</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_of_pred_lt</span> <span class="n">h4</span><span class="o">,</span>
        <span class="n">change</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="n">at</span> <span class="n">rw_h4</span><span class="o">,</span>

        <span class="n">cases</span> <span class="n">lt_or_eq_of_le</span> <span class="n">rw_h4</span><span class="o">,</span>

        <span class="o">{</span><span class="n">linarith</span><span class="o">,},</span>

        <span class="o">{},</span>



        <span class="c1">--change k ≤ x.fst at h4,</span>
        <span class="n">sorry</span><span class="o">},</span>

      <span class="o">{</span>

        <span class="n">sorry</span><span class="o">},</span>



    <span class="o">},</span> <span class="c1">--contradiction case</span>

    <span class="o">{</span>
      <span class="n">exact</span> <span class="n">le_of_eq</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">h_2</span><span class="o">),</span>
    <span class="o">},</span>
  <span class="o">},</span>

  <span class="n">exact</span> <span class="n">le_of_not_ge</span> <span class="n">h_1</span><span class="o">,</span>
<span class="o">},</span>


<span class="o">{</span>
  <span class="n">right</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">le_of_not_ge</span> <span class="n">h</span><span class="o">,</span>
  <span class="c1">-- same proof but symmetric</span>
  <span class="o">{</span><span class="n">sorry</span>


  <span class="o">},</span>

<span class="o">},</span>

<span class="o">{</span>
  <span class="n">right</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">le_of_not_ge</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">le_of_not_ge</span> <span class="n">h_1</span><span class="o">,</span>
  <span class="o">},</span>
<span class="kn">end</span>
</code></pre></div>



<a name="195645781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645781">(Apr 29 2020 at 00:23)</a>:</h4>
<p>my problem is right above <code>cases lt_or_eq_of_le rw_h4,</code></p>



<a name="195645943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195645943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195645943">(Apr 29 2020 at 00:26)</a>:</h4>
<ol>
<li><code>inequality_fact</code> is wrong (j=0, m=1)</li>
<li><code>finite_subset</code> doesn't exist</li>
<li><code>relabel</code> doesn't exist</li>
</ol>



<a name="195646081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646081">(Apr 29 2020 at 00:28)</a>:</h4>
<p>in the definition of <code>finite_subset</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="err">Σ&#39;</span> <span class="n">k</span><span class="o">,</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">n</span>
</code></pre></div>


<p>there's no need to use <code>Σ'</code>: <code>Σ</code> by itself would be fine</p>



<a name="195646121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646121">(Apr 29 2020 at 00:29)</a>:</h4>
<p>not there</p>



<a name="195646127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646127">(Apr 29 2020 at 00:29)</a>:</h4>
<p>you need <code>{k // k &lt; n}</code> there</p>



<a name="195646295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646295">(Apr 29 2020 at 00:32)</a>:</h4>
<p>ooh shoot lemme give the remaining code.  For <code>inequality_fact</code> I'm aware there's a small error for the 0 case, but I was going to go back and prove the fixed version after I finished the main lemma</p>



<a name="195646301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646301">(Apr 29 2020 at 00:32)</a>:</h4>
<p>I'll paste the code here again:</p>



<a name="195646333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646333">(Apr 29 2020 at 00:33)</a>:</h4>
<p>The correct version of <code>inequality_fact</code> is <code>nat.sub_lt_sub_right_iff</code></p>



<a name="195646409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646409">(Apr 29 2020 at 00:34)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>


<span class="n">def</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="err">Σ&#39;</span> <span class="n">k</span><span class="o">,</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">n</span>

<span class="kn">lemma</span> <span class="n">inequality_fact</span>
<span class="o">(</span><span class="n">j</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">j</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">:</span> <span class="n">j</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span>
<span class="o">:=</span> <span class="k">begin</span>
  <span class="n">intros</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">ext_iff</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">↔</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">.</span><span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">rw</span> <span class="n">h</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">cases</span> <span class="n">h</span><span class="o">,</span> <span class="n">refl</span><span class="o">,}</span>
<span class="kn">end</span>


<span class="n">def</span> <span class="n">relabel</span>
<span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="k">if</span> <span class="n">H</span> <span class="o">:</span> <span class="n">j</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="k">then</span> <span class="bp">⟨</span><span class="n">j</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">my_le_trans</span> <span class="n">j</span><span class="bp">.</span><span class="mi">1</span> <span class="n">k</span> <span class="n">m</span> <span class="n">p</span> <span class="n">H</span> <span class="bp">⟩</span> <span class="k">else</span> <span class="bp">⟨</span><span class="n">j</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">inequality_fact</span> <span class="n">j</span><span class="bp">.</span><span class="mi">1</span> <span class="n">m</span> <span class="n">j</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span>



<span class="kn">lemma</span> <span class="n">relabel_behavior</span>
<span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">p</span><span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">,</span>
<span class="o">(</span><span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">p</span><span class="o">)</span> <span class="n">y</span>
<span class="bp">→</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≥</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≥</span> <span class="n">k</span><span class="o">)</span>
<span class="o">:=</span>
<span class="k">begin</span>
<span class="n">introv</span> <span class="n">p2</span><span class="o">,</span>
<span class="n">unfold</span> <span class="n">relabel</span> <span class="n">at</span> <span class="n">p2</span><span class="o">,</span>
<span class="n">split_ifs</span> <span class="n">at</span> <span class="n">p2</span><span class="o">,</span>
<span class="o">{</span> <span class="n">left</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h_1</span><span class="o">,</span>
<span class="o">},</span>


<span class="o">{</span>
  <span class="n">right</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>

  <span class="o">{</span>
    <span class="n">cases</span> <span class="n">lt_or_eq_of_le</span> <span class="n">h</span><span class="o">,</span>
    <span class="o">{</span>
      <span class="k">let</span> <span class="n">q</span> <span class="o">:=</span> <span class="n">le_of_not_ge</span> <span class="n">h_1</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">lt_or_eq_of_le</span> <span class="n">q</span><span class="o">,</span>

      <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span>
        <span class="k">let</span> <span class="n">h4</span> <span class="o">:=</span> <span class="n">inequality_fact</span> <span class="n">k</span> <span class="n">y</span><span class="bp">.</span><span class="n">fst</span> <span class="n">h_3</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">ext_iff</span> <span class="n">at</span> <span class="n">p2</span><span class="o">,</span>
        <span class="n">change</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">y</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">-</span> <span class="mi">1</span> <span class="n">at</span> <span class="n">p2</span><span class="o">,</span>
        <span class="k">let</span> <span class="n">p2refl</span> <span class="o">:=</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">p2</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">p2refl</span> <span class="n">at</span> <span class="n">h4</span><span class="o">,</span>
        <span class="k">let</span> <span class="n">rw_h4</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_of_pred_lt</span> <span class="n">h4</span><span class="o">,</span>
        <span class="n">change</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="n">at</span> <span class="n">rw_h4</span><span class="o">,</span>

        <span class="n">cases</span> <span class="n">lt_or_eq_of_le</span> <span class="n">rw_h4</span><span class="o">,</span>

        <span class="o">{</span><span class="n">linarith</span><span class="o">,},</span>

        <span class="o">{},</span>



        <span class="c1">--change k ≤ x.fst at h4,</span>
        <span class="n">sorry</span><span class="o">},</span>

      <span class="o">{</span>

        <span class="n">sorry</span><span class="o">},</span>



    <span class="o">},</span> <span class="c1">--contradiction case</span>

    <span class="o">{</span>
      <span class="n">exact</span> <span class="n">le_of_eq</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">h_2</span><span class="o">),</span>
    <span class="o">},</span>
  <span class="o">},</span>

  <span class="n">exact</span> <span class="n">le_of_not_ge</span> <span class="n">h_1</span><span class="o">,</span>
<span class="o">},</span>


<span class="o">{</span>
  <span class="n">right</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">le_of_not_ge</span> <span class="n">h</span><span class="o">,</span>
  <span class="c1">-- same proof but symmetric</span>
  <span class="o">{</span><span class="n">sorry</span>


  <span class="o">},</span>

<span class="o">},</span>

<span class="o">{</span>
  <span class="n">right</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">le_of_not_ge</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">le_of_not_ge</span> <span class="n">h_1</span><span class="o">,</span>
  <span class="o">},</span>
<span class="kn">end</span>
</code></pre></div>



<a name="195646424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646424">(Apr 29 2020 at 00:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I'll substitute that in and modify accordingly then.  Thanks!</p>



<a name="195646511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646511">(Apr 29 2020 at 00:36)</a>:</h4>
<p>the answer to the <code>nat.sub x 0</code> is that you used <code>let</code> instead of <code>have</code>:</p>
<div class="codehilite"><pre><span></span><code>          <span class="k">have</span> <span class="n">rw_h4</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_of_pred_lt</span> <span class="n">h4</span><span class="o">,</span>
          <span class="n">change</span> <span class="n">k</span> <span class="bp">≤</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="n">at</span> <span class="n">rw_h4</span><span class="o">,</span>
</code></pre></div>



<a name="195646515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646515">(Apr 29 2020 at 00:36)</a>:</h4>
<p>(also it was <code>\le</code> not <code>&lt;</code>)</p>



<a name="195646660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646660">(Apr 29 2020 at 00:39)</a>:</h4>
<p>okay!  give me a second to change it</p>



<a name="195646954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646954">(Apr 29 2020 at 00:44)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">lemma</span> <span class="n">inequality_fact</span> <span class="o">(</span><span class="n">j</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">j</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="n">j</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="n">def</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">k</span> <span class="bp">//</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">relabel</span> <span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">H</span> <span class="o">:</span> <span class="n">j</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="k">then</span> <span class="bp">⟨</span><span class="n">j</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">sorry</span><span class="bp">⟩</span> <span class="k">else</span> <span class="bp">⟨</span><span class="n">j</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">sorry</span><span class="bp">⟩</span>

<span class="kn">lemma</span> <span class="n">ext_iff</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">↔</span> <span class="n">a</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">.</span><span class="mi">1</span> <span class="o">:=</span>
<span class="n">subtype</span><span class="bp">.</span><span class="n">ext</span>

<span class="kn">lemma</span> <span class="n">relabel_behavior</span> <span class="o">(</span><span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">hxy</span> <span class="o">:</span> <span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">h</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">relabel</span> <span class="n">m</span> <span class="n">k</span> <span class="n">h</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≥</span> <span class="n">k</span> <span class="bp">∧</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">≥</span> <span class="n">k</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold</span> <span class="n">relabel</span> <span class="n">at</span> <span class="n">hxy</span><span class="o">,</span>
  <span class="n">split_ifs</span> <span class="n">at</span> <span class="n">hxy</span> <span class="k">with</span> <span class="n">hxk</span> <span class="n">hyk</span> <span class="n">hyk</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">left</span><span class="bp">;</span> <span class="n">split</span><span class="bp">;</span> <span class="n">assumption</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">right</span><span class="bp">;</span> <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">mk_eq_mk</span> <span class="n">at</span> <span class="n">hxy</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">lt_or_eq_of_le</span> <span class="n">hxk</span> <span class="k">with</span> <span class="n">hxlk</span> <span class="n">hxek</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">rw</span> <span class="n">hxy</span> <span class="n">at</span> <span class="n">hxlk</span><span class="o">,</span> <span class="n">exact</span> <span class="n">absurd</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">le_of_pred_lt</span> <span class="n">hxlk</span><span class="o">)</span> <span class="n">hyk</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">ge_of_eq</span> <span class="n">hxek</span> <span class="o">}</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">le_of_not_ge</span> <span class="n">hyk</span> <span class="o">}</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">right</span><span class="bp">;</span> <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">le_of_not_ge</span> <span class="n">hxk</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">mk_eq_mk</span> <span class="n">at</span> <span class="n">hxy</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">lt_or_eq_of_le</span> <span class="n">hyk</span> <span class="k">with</span> <span class="n">hylk</span> <span class="n">hyek</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">hxy</span> <span class="n">at</span> <span class="n">hylk</span><span class="o">,</span> <span class="n">exact</span> <span class="n">absurd</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">le_of_pred_lt</span> <span class="n">hylk</span><span class="o">)</span> <span class="n">hxk</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">ge_of_eq</span> <span class="n">hyek</span> <span class="o">}</span> <span class="o">}</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">right</span><span class="bp">;</span> <span class="n">split</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">le_of_not_ge</span><span class="bp">;</span> <span class="n">assumption</span> <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="195646960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195646960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195646960">(Apr 29 2020 at 00:44)</a>:</h4>
<p>here's your MWE mathlib-stylized</p>



<a name="195647258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195647258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195647258">(Apr 29 2020 at 00:48)</a>:</h4>
<p>oh damn.  Thank you so much!</p>



<a name="195649122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649122">(Apr 29 2020 at 01:12)</a>:</h4>
<p>wait</p>



<a name="195649177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649177">(Apr 29 2020 at 01:12)</a>:</h4>
<p>so changing the definition of <code>finite_subset</code> introduced a few errors into my existing code.  Can I give you a snippet of the stuff that has errors?</p>



<a name="195649187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649187">(Apr 29 2020 at 01:12)</a>:</h4>
<p>change <code>x.fst</code> to <code>x.1</code></p>



<a name="195649229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649229">(Apr 29 2020 at 01:13)</a>:</h4>
<p>the errors don't pertain to that, at least not as far as I can tell?</p>



<a name="195649249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649249">(Apr 29 2020 at 01:13)</a>:</h4>
<p>Here, lemme get an example</p>



<a name="195649489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649489">(Apr 29 2020 at 01:17)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="n">def</span> <span class="n">injective</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x₁</span> <span class="n">x₂</span><span class="o">,</span> <span class="n">f</span> <span class="n">x₁</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x₂</span> <span class="bp">→</span> <span class="n">x₁</span> <span class="bp">=</span> <span class="n">x₂</span>

<span class="n">def</span> <span class="n">finite_subset</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">k</span> <span class="bp">//</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">lift_finite</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">finite_subset</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">finite_subset</span> <span class="n">n</span>
    <span class="o">:=</span> <span class="bp">λ</span> <span class="n">k</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">lt</span><span class="bp">.</span><span class="n">trans</span> <span class="n">k</span><span class="bp">.</span><span class="mi">2</span> <span class="n">p</span><span class="bp">⟩</span>

<span class="kn">theorem</span> <span class="n">lift_finite_injective</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
 <span class="n">injective</span> <span class="o">(</span><span class="n">lift_finite</span> <span class="n">m</span> <span class="n">n</span> <span class="n">p</span><span class="o">)</span>
<span class="o">:=</span> <span class="k">begin</span>
<span class="n">introv</span> <span class="n">x</span> <span class="n">p2</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">x₂</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">p2</span><span class="o">,</span>
<span class="n">refl</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="195649494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649494">(Apr 29 2020 at 01:18)</a>:</h4>
<p>here there is an error at <code>cases p2,</code></p>



<a name="195649560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649560">(Apr 29 2020 at 01:18)</a>:</h4>
<p>the error is: <code>cases tactic failed, unexpected failure when introducing auxiliary equatilies</code></p>



<a name="195649696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649696">(Apr 29 2020 at 01:20)</a>:</h4>
<p>I wonder why it ever worked.</p>



<a name="195649705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649705">(Apr 29 2020 at 01:20)</a>:</h4>
<p>Anyways, I wouldn't recommend changing your definitions in the middle of working on a huge proof...</p>



<a name="195649718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649718">(Apr 29 2020 at 01:20)</a>:</h4>
<p>hmm I wonder why it doesn't work in this case</p>



<a name="195649912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649912">(Apr 29 2020 at 01:24)</a>:</h4>
<p>it seems only this proof was affected.  Luckily, no other proofs were affected ( as far as I can tell based on a glance at the errors)</p>



<a name="195649917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649917">(Apr 29 2020 at 01:24)</a>:</h4>
<p>By the way, where did you learn <code>introv</code>? I've never seen anyone else use it.</p>



<a name="195649978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195649978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195649978">(Apr 29 2020 at 01:26)</a>:</h4>
<p>I was browsing the mathlib section looking at <code>intro</code> and <code>intros</code>.  This tactic appeared right after those, so I checked it out.</p>



<a name="195650561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195650561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195650561">(Apr 29 2020 at 01:40)</a>:</h4>
<p>I'm not sure how to fix <code>lift_finite_injective</code></p>



<a name="195650665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195650665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195650665">(Apr 29 2020 at 01:41)</a>:</h4>
<p>Use Kevin's helpful <code>ext_iff</code> lemma.</p>



<a name="195650672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195650672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195650672">(Apr 29 2020 at 01:41)</a>:</h4>
<p>This is its time to shine.</p>



<a name="195651236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195651236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195651236">(Apr 29 2020 at 01:51)</a>:</h4>
<p>okay, I'll try it</p>



<a name="195652219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652219">(Apr 29 2020 at 02:06)</a>:</h4>
<p>okay, it did the trick</p>



<a name="195652252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652252">(Apr 29 2020 at 02:07)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">lift_finite_injective</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
 <span class="n">injective</span> <span class="o">(</span><span class="n">lift_finite</span> <span class="n">m</span> <span class="n">n</span> <span class="n">p</span><span class="o">)</span>
<span class="o">:=</span> <span class="k">begin</span>
<span class="n">introv</span> <span class="n">x</span> <span class="n">p2</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">x</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">x₂</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">ext_iff</span> <span class="n">at</span> <span class="n">p2</span><span class="o">,</span>
<span class="n">exact</span> <span class="o">(</span><span class="n">ext_iff</span> <span class="n">m</span> <span class="bp">⟨</span><span class="n">x_val</span><span class="o">,</span> <span class="n">x_property</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">x₂_val</span><span class="o">,</span> <span class="n">x₂_property</span><span class="bp">⟩</span><span class="o">)</span><span class="bp">.</span><span class="n">mpr</span> <span class="n">p2</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="195652464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652464">(Apr 29 2020 at 02:11)</a>:</h4>
<p>Okay. May I suggest:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">lift_finite_injective</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
 <span class="n">injective</span> <span class="o">(</span><span class="n">lift_finite</span> <span class="n">m</span> <span class="n">n</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">x₁</span> <span class="n">x₂</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">ext_iff</span> <span class="n">at</span> <span class="err">⊢</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h</span>
<span class="kn">end</span>
</code></pre></div>



<a name="195652492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652492">(Apr 29 2020 at 02:12)</a>:</h4>
<p>lemme try that</p>



<a name="195652518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652518">(Apr 29 2020 at 02:12)</a>:</h4>
<p>it works!</p>



<a name="195652524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652524">(Apr 29 2020 at 02:12)</a>:</h4>
<p>thank you!  I'll examine the differences at these two approaches later tonight</p>



<a name="195652531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652531">(Apr 29 2020 at 02:13)</a>:</h4>
<p>Right now, my plan is this:</p>



<a name="195652672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652672">(Apr 29 2020 at 02:16)</a>:</h4>
<p>from <code>relabel_behavior</code>, I know that <code>relabel m k p f (x_l) = relabel m k p f (y_l)</code> implies  <code>f (x_1) &lt;= k</code> and <code>f (y_1) &lt;= k</code>, or <code>f (x_1) &gt;= k</code> and <code>f (y_1) &gt;= k</code></p>



<a name="195652685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652685">(Apr 29 2020 at 02:18)</a>:</h4>
<p>I want to make a lemma where <code>z &lt;= k</code> implies <code>(relabel m k p) z = &lt; z, z &lt; m&gt;</code></p>



<a name="195652732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652732">(Apr 29 2020 at 02:18)</a>:</h4>
<p>and another where <code>z &gt;= k</code> implies <code>(relabel m k p) z = &lt; z - 1, z - 1 &lt; m &gt;</code></p>



<a name="195652738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195652738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195652738">(Apr 29 2020 at 02:18)</a>:</h4>
<p>this shouldn't be too hard based on the definition of <code>relabel</code>, right?</p>



<a name="195653280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/showing%20injectivity/near/195653280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adeeb K <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/showing.20injectivity.html#195653280">(Apr 29 2020 at 02:31)</a>:</h4>
<p>actually...I'm not sure how to start</p>



{% endraw %}

<hr><p>Last updated: Apr 29 2020 at 03:04 UTC</p>