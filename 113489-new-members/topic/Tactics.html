---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Tactics.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html">Tactics</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="195318228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318228">(Apr 26 2020 at 05:19)</a>:</h4>
<p>I'm not fully grasping  what the tactics are doing in this proof. I've written a comment that is how I'm thinking of it on paper but not sure if that's correct.</p>
<div class="codehilite"><pre><span></span>        <span class="kn">theorem</span> <span class="n">even_plus_even2</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span>
            <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">is_even</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">is_even</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_even</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
                <span class="k">match</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span> <span class="k">with</span>
                    <span class="bp">⟨</span><span class="n">w1</span><span class="o">,</span> <span class="n">hw1</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">w2</span><span class="o">,</span> <span class="n">hw2</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">w1</span> <span class="bp">+</span> <span class="n">w2</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hw1</span><span class="o">,</span> <span class="n">hw2</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">]</span><span class="bp">⟩</span>
                <span class="kn">end</span>
        <span class="c">/-</span><span class="cm"></span>
<span class="cm">        ∃ w1, a = 2 * w1</span>
<span class="cm">        w1 : ℕ</span>
<span class="cm">        hw1 : a = 2 * w1</span>
<span class="cm">        ∃ w2, b = 2 * w2</span>
<span class="cm">        w2 : ℕ</span>
<span class="cm">        hw2 : b = 2 * w2</span>
<span class="cm">        w1 = a/2, w2 = b/2</span>
<span class="cm">        w1 + w2 = a/2 + b/2</span>
<span class="cm">        a + b = 2 * (w1 + w2)</span>
<span class="cm">        -/</span>
</pre></div>



<a name="195318664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318664">(Apr 26 2020 at 05:35)</a>:</h4>
<p>This proof looks okay (but you didn't provide a MWE). What error do you get?</p>



<a name="195318727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318727">(Apr 26 2020 at 05:37)</a>:</h4>
<p>Or is the proof correct and you don't understand how it works?</p>



<a name="195318769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318769">(Apr 26 2020 at 05:38)</a>:</h4>
<p>The proof is correct I'm just trying to understand what's going on under the hood</p>



<a name="195318771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318771">(Apr 26 2020 at 05:38)</a>:</h4>
<p>Actually there aren't really any tactics in this proof except <code>rw</code>. The <code>match</code> is pattern matching on <code>h1</code> and <code>h2</code>, which are existential statements once you unfold the definition of <code>is_even</code>, to produce <code>w1</code> and <code>hw1 : a = 2 * w1</code> and similarly for <code>w2</code></p>



<a name="195318779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318779">(Apr 26 2020 at 05:39)</a>:</h4>
<p>yeah I understand match I just dont fully understand the <code>,by rw [hw1, hw2, mul_add]</code></p>



<a name="195318783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318783">(Apr 26 2020 at 05:39)</a>:</h4>
<p>The right hand side is similarly building an existential proof saying <code>w1 + w2</code> suffices, and so the <code>by rw</code> proof needs to prove <code>a + b = 2 * (w1 + w2)</code></p>



<a name="195318828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318828">(Apr 26 2020 at 05:40)</a>:</h4>
<p>Then the rewrites respectively change the goal to <code>2 * w1 + b = 2 * (w1 + w2)</code> and <code>2 * w1 + 2 * w2 = 2 * (w1 + w2)</code>, and the final <code>mul_add</code> rewrites the right hand side to <code>2 * w1 + 2 * w2 = 2 * w1 + 2 * w2</code>. Since this is true by reflexivity it closes the goal</p>



<a name="195318835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318835">(Apr 26 2020 at 05:40)</a>:</h4>
<p>At least, that's what the lean in my head would do, since that's not an MWE I can't test it</p>



<a name="195318882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318882">(Apr 26 2020 at 05:42)</a>:</h4>
<p>Ohhh that makes sense, thanks!</p>



<a name="195318887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318887">(Apr 26 2020 at 05:42)</a>:</h4>
<p>So rewrite is a substitution rule</p>



<a name="195318888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frank Dai <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318888">(Apr 26 2020 at 05:42)</a>:</h4>
<p>you can also expand <code>by rw [a, b, c]</code> into <code>begin rw a, rw b, rw c, end</code> and step through it</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">even_plus_even2</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span>
    <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">is_even</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">is_even</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_even</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
        <span class="k">match</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span> <span class="k">with</span>
            <span class="bp">⟨</span><span class="n">w1</span><span class="o">,</span> <span class="n">hw1</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">w2</span><span class="o">,</span> <span class="n">hw2</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">w1</span> <span class="bp">+</span> <span class="n">w2</span><span class="o">,</span> <span class="k">begin</span>
              <span class="n">rw</span> <span class="n">hw1</span><span class="o">,</span>
              <span class="n">rw</span> <span class="n">hw2</span><span class="o">,</span>
              <span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
              <span class="kn">end</span><span class="bp">⟩</span>
        <span class="kn">end</span>
 <span class="bp">```</span>
</pre></div>



<a name="195318891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318891">(Apr 26 2020 at 05:43)</a>:</h4>
<p>You should be able to step through it even if it is in <code>rw [a,b,c]</code> form</p>



<a name="195318892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318892">(Apr 26 2020 at 05:43)</a>:</h4>
<p>this is one of the special privileges of the <code>rw</code> tactic</p>



<a name="195318992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195318992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195318992">(Apr 26 2020 at 05:46)</a>:</h4>
<p>How does mul_add know to apply to the right hand side of the equation?</p>



<a name="195319004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195319004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195319004">(Apr 26 2020 at 05:47)</a>:</h4>
<p>rw is rewriting terms on the LHS but mul_add works on the RHS.</p>



<a name="195319013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195319013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195319013">(Apr 26 2020 at 05:47)</a>:</h4>
<p><code>⊢ 2 * w1 + 2 * w2 = 2 * (w1 + w2)</code></p>



<a name="195319108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195319108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195319108">(Apr 26 2020 at 05:50)</a>:</h4>
<p><code>rw</code> will try to find the LHS of the input theorem anywhere in the goal, including on the RHS of the equality if the goal happens to be an equality</p>



<a name="195319119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195319119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195319119">(Apr 26 2020 at 05:51)</a>:</h4>
<p>If you used mul_add the other way around, that is <code>rw &lt;- mul_add</code>, then it would try to find <code>a * b + a * c</code> somewhere in the goal instead. In this case it would still succeed, rewriting the LHS and resulting in <code>2 * (w1 + w2) = 2 * (w1 + w2)</code> which is also reflexivity</p>



<a name="195319239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics/near/195319239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon B <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.html#195319239">(Apr 26 2020 at 05:55)</a>:</h4>
<p>When we use tactics, what exactly is happening? Is it replacing the tactic command with lambda expressions under-the-hood? Doesn't everything ultimately need to be reduced to lambda expressions for type checking?</p>



{% endraw %}

<hr><p>Last updated: Apr 26 2020 at 06:04 UTC</p>