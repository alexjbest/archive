---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Diagnosing.20timeout.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html">Diagnosing timeout</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="195833392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195833392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195833392">(Apr 30 2020 at 12:46)</a>:</h4>
<p>I'm getting a confusing deterministic timeout - with the last line of my proof there's a timeout but without it there isn't, and if I reorder the proof to have a different last line, still the last line gives a timeout. I haven't used anything like simp or tidy, and I'm pretty sure there shouldn't be any difficult typeclass searches either. What sort of thing could I do to figure out why it's timing out? (I can't really post an MWE since it's on top of thousands of lines of topos code but the proof is:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">sheaf_exponential</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">sheaf</span> <span class="n">C</span> <span class="n">j</span><span class="o">)</span> <span class="o">:</span> <span class="n">sheaf</span> <span class="n">C</span> <span class="n">j</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">exp</span> <span class="n">A</span> <span class="n">s</span><span class="bp">.</span><span class="n">A</span><span class="o">,</span>
  <span class="n">unique_extend</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">B</span> <span class="n">B&#39;</span> <span class="n">m</span> <span class="n">f&#39;</span> <span class="n">d</span><span class="o">,</span>
  <span class="k">begin</span>
    <span class="n">haveI</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">dense_prod_map_id</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">j</span> <span class="bp">_</span> <span class="n">A</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">m</span> <span class="n">d</span><span class="o">,</span>
    <span class="n">refine</span> <span class="bp">⟨⟨⟨</span><span class="n">cchat</span> <span class="o">(</span><span class="n">s</span><span class="bp">.</span><span class="n">unique_extend</span> <span class="o">(</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">A</span><span class="o">)</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">unhat</span> <span class="n">f&#39;</span><span class="o">))</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩⟩</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">exp_transpose_natural_left</span><span class="o">,</span>
      <span class="n">rw</span> <span class="o">(</span><span class="n">s</span><span class="bp">.</span><span class="n">unique_extend</span> <span class="o">(</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">A</span><span class="o">)</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">unhat</span> <span class="n">f&#39;</span><span class="o">))</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
      <span class="n">exact</span> <span class="o">((</span><span class="n">exp</span><span class="bp">.</span><span class="n">adjunction</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">hom_equiv</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">right_inv</span> <span class="n">f&#39;</span> <span class="o">},</span>
    <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">ha</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">z</span> <span class="o">:</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">A</span><span class="o">)</span> <span class="n">m</span> <span class="err">≫</span> <span class="n">unhat</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">unhat</span> <span class="n">f&#39;</span><span class="o">,</span>
      <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">exp_transpose_natural_left_symm</span> <span class="n">m</span> <span class="n">a</span><span class="o">,</span> <span class="n">ha</span><span class="o">],</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="o">(</span><span class="n">s</span><span class="bp">.</span><span class="n">unique_extend</span> <span class="o">(</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">A</span><span class="o">)</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">unhat</span> <span class="n">f&#39;</span><span class="o">))</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">⟨</span><span class="n">unhat</span> <span class="n">a</span><span class="o">,</span> <span class="n">z</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">congr</span><span class="o">,</span>
    <span class="n">symmetry</span><span class="o">,</span>
    <span class="n">refine</span> <span class="o">((</span><span class="n">exp</span><span class="bp">.</span><span class="n">adjunction</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">hom_equiv</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">right_inv</span> <span class="n">a</span><span class="o">,</span>
  <span class="kn">end</span>
<span class="o">}</span>
</code></pre></div>



<a name="195833617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195833617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195833617">(Apr 30 2020 at 12:49)</a>:</h4>
<p>I'm not sure if it makes a difference but the proof of <code>dense_prod_map_id</code> is currently sorry</p>



<a name="195833653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195833653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195833653">(Apr 30 2020 at 12:49)</a>:</h4>
<p>and without the final line of the proof, it's very quick to show me the tactic state</p>



<a name="195833884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195833884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195833884">(Apr 30 2020 at 12:51)</a>:</h4>
<p>are there other fields of <code>sheaf</code> you haven't provided?</p>



<a name="195833898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195833898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195833898">(Apr 30 2020 at 12:51)</a>:</h4>
<p>Nope</p>



<a name="195834909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195834909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195834909">(Apr 30 2020 at 13:01)</a>:</h4>
<p>You can try turning on various trace flags, and see whether anything looks obviously out of control. Otherwise, I am afraid it's not easy to tell what's going on</p>



<a name="195835003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195835003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195835003">(Apr 30 2020 at 13:01)</a>:</h4>
<p>One possibility is that you actually have a type error and Lean is going on an unfolding spree to see if it can be reduced away</p>



<a name="195835097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195835097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195835097">(Apr 30 2020 at 13:02)</a>:</h4>
<p>Are there any trace flags I should try first? <code>trace.class_instances</code> didn't seem out of control</p>



<a name="195835237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195835237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195835237">(Apr 30 2020 at 13:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113488-general/topic/Diagnosing.20timeout/near/195835003" title="#narrow/stream/113488-general/topic/Diagnosing.20timeout/near/195835003">said</a>:</p>
<blockquote>
<p>One possibility is that you actually have a type error and Lean is going on an unfolding spree to see if it can be reduced away</p>
</blockquote>
<p>This makes sense, but if I reorder the proof (eg changing the <code>have z</code> to a <code>suffices</code>) there's no type error for the alternative last line</p>



<a name="195835283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195835283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195835283">(Apr 30 2020 at 13:04)</a>:</h4>
<p>For clarity, by reordered proof I mean:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">sheaf_exponential</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">sheaf</span> <span class="n">C</span> <span class="n">j</span><span class="o">)</span> <span class="o">:</span> <span class="n">sheaf</span> <span class="n">C</span> <span class="n">j</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">exp</span> <span class="n">A</span> <span class="n">s</span><span class="bp">.</span><span class="n">A</span><span class="o">,</span>
  <span class="n">unique_extend</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">B</span> <span class="n">B&#39;</span> <span class="n">m</span> <span class="n">f&#39;</span> <span class="n">d</span><span class="o">,</span>
  <span class="k">begin</span>
    <span class="n">haveI</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">dense_prod_map_id</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">j</span> <span class="bp">_</span> <span class="n">A</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">m</span> <span class="n">d</span><span class="o">,</span>
    <span class="n">refine</span> <span class="bp">⟨⟨⟨</span><span class="n">cchat</span> <span class="o">(</span><span class="n">s</span><span class="bp">.</span><span class="n">unique_extend</span> <span class="o">(</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">A</span><span class="o">)</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">unhat</span> <span class="n">f&#39;</span><span class="o">))</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩⟩</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">exp_transpose_natural_left</span><span class="o">,</span>
      <span class="n">rw</span> <span class="o">(</span><span class="n">s</span><span class="bp">.</span><span class="n">unique_extend</span> <span class="o">(</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">A</span><span class="o">)</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">unhat</span> <span class="n">f&#39;</span><span class="o">))</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
      <span class="n">exact</span> <span class="o">((</span><span class="n">exp</span><span class="bp">.</span><span class="n">adjunction</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">hom_equiv</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">right_inv</span> <span class="n">f&#39;</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">ha</span><span class="bp">⟩</span><span class="o">,</span>
      <span class="n">suffices</span> <span class="n">z</span> <span class="o">:</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">A</span><span class="o">)</span> <span class="n">m</span> <span class="err">≫</span> <span class="n">unhat</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">unhat</span> <span class="n">f&#39;</span><span class="o">,</span>
        <span class="n">rw</span> <span class="err">←</span> <span class="o">(</span><span class="n">s</span><span class="bp">.</span><span class="n">unique_extend</span> <span class="o">(</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">A</span><span class="o">)</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">unhat</span> <span class="n">f&#39;</span><span class="o">))</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">⟨</span><span class="n">unhat</span> <span class="n">a</span><span class="o">,</span> <span class="n">z</span><span class="bp">⟩</span><span class="o">,</span>
        <span class="n">congr</span><span class="o">,</span>
        <span class="n">symmetry</span><span class="o">,</span>
        <span class="n">refine</span> <span class="o">((</span><span class="n">exp</span><span class="bp">.</span><span class="n">adjunction</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">hom_equiv</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">right_inv</span> <span class="n">a</span><span class="o">,</span>
      <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">exp_transpose_natural_left_symm</span> <span class="n">m</span> <span class="n">a</span><span class="o">,</span> <span class="n">ha</span><span class="o">],</span>
    <span class="o">}</span>
  <span class="kn">end</span>
<span class="o">}</span>
</code></pre></div>



<a name="195835390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195835390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195835390">(Apr 30 2020 at 13:04)</a>:</h4>
<p>In both cases commenting out the last line (in the latter case, just the <code>ha</code>) tells me quickly that the goal isn't solved and there's no other errors</p>



<a name="195835402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195835402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195835402">(Apr 30 2020 at 13:04)</a>:</h4>
<p>maybe <code>set_option trace.type_context.is_def_eq true</code></p>



<a name="195835923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195835923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195835923">(Apr 30 2020 at 13:09)</a>:</h4>
<p>Doesn't seem to be crazy, one of the rw gives a pretty long trace but most of it says success</p>



<a name="195836978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195836978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195836978">(Apr 30 2020 at 13:18)</a>:</h4>
<p>Post a MWE anyway. Seriously. Of the form "download this branch of this repo, and look at this line in this file". When people did this in the past I just thought they were taking the mickey. But now with leanproject it's much easier.</p>



<a name="195837143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195837143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195837143">(Apr 30 2020 at 13:20)</a>:</h4>
<p>Well, something must be happening where Lean starts taking time.</p>



<a name="195837169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195837169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195837169">(Apr 30 2020 at 13:20)</a>:</h4>
<p>In the past I have occasionally resorted to running Lean in a debugger, then stopping it at a random point and looking at the trace</p>



<a name="195837876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195837876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195837876">(Apr 30 2020 at 13:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/Diagnosing.20timeout/near/195836978" title="#narrow/stream/113488-general/topic/Diagnosing.20timeout/near/195836978">said</a>:</p>
<blockquote>
<p>Post a MWE anyway. Seriously. Of the form "download this branch of repo, and look at this line in this file". When people did this in the past I just thought they were taking the mickey. But now with leanproject it's much easier.</p>
</blockquote>
<p>The final line in <a href="https://github.com/b-mehta/topos/blob/sheaf/src/sheaf.lean" title="https://github.com/b-mehta/topos/blob/sheaf/src/sheaf.lean">https://github.com/b-mehta/topos/blob/sheaf/src/sheaf.lean</a> - download the sheaf branch of the repo. (It's not particularly minimal)</p>



<a name="195860476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195860476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195860476">(Apr 30 2020 at 15:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113488-general/topic/Diagnosing.20timeout/near/195837169" title="#narrow/stream/113488-general/topic/Diagnosing.20timeout/near/195837169">said</a>:</p>
<blockquote>
<p>In the past I have occasionally resorted to running Lean in a debugger, then stopping it at a random point and looking at the trace</p>
</blockquote>
<p>How could I do this?</p>



<a name="195866461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195866461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195866461">(Apr 30 2020 at 16:39)</a>:</h4>
<p>If I add another line (eg simp) before the <code>end</code>, it says the tactic state is <code>goals accomplished</code> and the simp fails with match failed, no goals; and this happens quickly</p>



<a name="195869576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195869576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195869576">(Apr 30 2020 at 16:57)</a>:</h4>
<p>My guess is that you should try to fill in the sorry of <code>dense_prod_map_id</code>: it is not a Prop, so what you put in there is important.</p>
<p>By the way, all these classes (<code>dense</code>, <code>closed</code>) are not Props because <code>is_iso</code> is not Prop either. Does it really create problems to turn <code>is_iso</code> into a Prop, just requiring the existence of an inverse -- and having a convenience function <code>is_iso.inverse</code> that would pull the inverse out of choice?</p>



<a name="195869737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195869737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195869737">(Apr 30 2020 at 16:58)</a>:</h4>
<p>This is the big "category_theory uses data, not Props" question...</p>



<a name="195869849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195869849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195869849">(Apr 30 2020 at 16:59)</a>:</h4>
<p>The same thing with <code>has_limits</code> etc...</p>



<a name="195870021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195870021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195870021">(Apr 30 2020 at 17:00)</a>:</h4>
<p>Yeah I think it has to be all or nothing - we've got to have everything as a Prop or everything as data otherwise things won't play well with each other</p>



<a name="195870328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diagnosing%20timeout/near/195870328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Diagnosing.20timeout.html#195870328">(Apr 30 2020 at 17:02)</a>:</h4>
<p>If the data is not unique, then I understand you need to keep the data and record the way it is constructed. But when the data is unique like the inverse, I don't see the point.</p>



{% endraw %}

<hr><p>Last updated: Apr 30 2020 at 17:04 UTC</p>