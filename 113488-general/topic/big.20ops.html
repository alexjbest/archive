---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/big.20ops.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html">big ops</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="195813899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195813899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195813899">(Apr 30 2020 at 09:07)</a>:</h4>
<p>What do people think of</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">to_additive</span><span class="o">]</span>
<span class="kn">abbreviation</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">prod</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">prod</span> <span class="n">f</span>

<span class="n">localized</span> <span class="s2">&quot;notation `∑` binders `, ` r:(scoped f, fintype.sum f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders `, ` r:(scoped f, fintype.prod f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>

<span class="n">localized</span> <span class="s2">&quot;notation `∑` binders ` in ` s `, ` r:(scoped f, finset.sum s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders ` in ` s `, ` r:(scoped f, finset.prod s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
</code></pre></div>


<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I know that this is a very meagre substitute for the big ops library in coq. But I think it's better to wait for Lean 4 before we start a big refactor. In the mean time, this notation seems like a cheap way to improve readability.</p>



<a name="195815811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195815811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195815811">(Apr 30 2020 at 09:30)</a>:</h4>
<p>Does this actually work? I mean both the fintype and finset version at the same time.</p>



<a name="195815858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195815858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195815858">(Apr 30 2020 at 09:31)</a>:</h4>
<p>Oh I see, the notation is subtly different</p>



<a name="195815872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195815872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195815872">(Apr 30 2020 at 09:31)</a>:</h4>
<p>The question still stands, but I'm more optimistic</p>



<a name="195816376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195816376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195816376">(Apr 30 2020 at 09:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> See <a href="https://github.com/leanprover-community/mathlib/pull/1564/files/88a5f988abd92ea699824d72dd8c0fcdd5cd4ac0..60f01102933198521d31c2d58ad07651a23dccec#diff-c5bb8de7cb26ae773e9bcb3fa594be6fL57-R230" title="https://github.com/leanprover-community/mathlib/pull/1564/files/88a5f988abd92ea699824d72dd8c0fcdd5cd4ac0..60f01102933198521d31c2d58ad07651a23dccec#diff-c5bb8de7cb26ae773e9bcb3fa594be6fL57-R230">https://github.com/leanprover-community/mathlib/pull/1564/files/88a5f988abd92ea699824d72dd8c0fcdd5cd4ac0..60f01102933198521d31c2d58ad07651a23dccec#diff-c5bb8de7cb26ae773e9bcb3fa594be6fL57-R230</a> for a short proof of concept</p>



<a name="195816798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195816798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195816798">(Apr 30 2020 at 09:41)</a>:</h4>
<p>Yes, I saw, that's wonderful. My question is specifically about coexistence of the two variations. Do you use both in that file?</p>



<a name="195817437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195817437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195817437">(Apr 30 2020 at 09:48)</a>:</h4>
<p>Yes, I do.</p>



<a name="195817583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195817583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195817583">(Apr 30 2020 at 09:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> The first <code>calc</code> in the proof mixes them, for example.</p>



<a name="195817681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195817681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195817681">(Apr 30 2020 at 09:50)</a>:</h4>
<p>amazing</p>



<a name="195819686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195819686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195819686">(Apr 30 2020 at 10:12)</a>:</h4>
<p>Would that conflict with</p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="bp">`</span><span class="err">∑</span><span class="bp">`</span> <span class="n">binders</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="n">r</span><span class="o">:(</span><span class="n">scoped</span> <span class="n">f</span><span class="o">,</span> <span class="n">tsum</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span> <span class="n">r</span>
</code></pre></div>


<p>in <code>topology/algebra/infinite_sum</code>? (If necessary, we could also localize this one).</p>



<a name="195820160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195820160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195820160">(Apr 30 2020 at 10:18)</a>:</h4>
<p>People will probably want to use both when discussing partial sums.</p>



<a name="195821357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195821357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195821357">(Apr 30 2020 at 10:33)</a>:</h4>
<p>I would be ok with <code>∑'</code> for the infinite sum, and the other notations introduced by Johan.</p>



<a name="195821855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195821855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195821855">(Apr 30 2020 at 10:39)</a>:</h4>
<p>Yes, I also thought about that, and I think the <code>'</code> version would be best.</p>



<a name="195821974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195821974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195821974">(Apr 30 2020 at 10:40)</a>:</h4>
<p>To what extent could this refactor be done with a regex? Because I fear it will be a lot of work if everything has to be done manually...</p>



<a name="195822103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822103">(Apr 30 2020 at 10:41)</a>:</h4>
<p>One thing I noticed with my experiment is that <code>rw [finset.sum_lemma]</code> doesn't play very well with <code>abbreviation fintype.sum f := finset.sum univ f</code></p>



<a name="195822165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822165">(Apr 30 2020 at 10:42)</a>:</h4>
<p>Just using search and replace in all files in vscode, replacing <code>∑</code> with <code>∑'</code>, should do it, hopefully.</p>



<a name="195822179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822179">(Apr 30 2020 at 10:42)</a>:</h4>
<p>But I wouldn't like restating a whole bunch of lemmas to <code>fintype.sum</code>. At the same time, I think <code>∑ x in univ, f x</code> is ugly.</p>



<a name="195822191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822191">(Apr 30 2020 at 10:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110050">Sebastien Gouezel</span> <a href="#narrow/stream/113488-general/topic/big.20ops/near/195822165" title="#narrow/stream/113488-general/topic/big.20ops/near/195822165">said</a>:</p>
<blockquote>
<p>Just using search and replace in all files in vscode, replacing <code>∑</code> with <code>∑'</code>, should do it, hopefully.</p>
</blockquote>
<p>No, I meant the other refactor.</p>



<a name="195822213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822213">(Apr 30 2020 at 10:43)</a>:</h4>
<p>Replacing all <code>finset.sum s f</code> with <code>∑ x in s, f x</code></p>



<a name="195822215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822215">(Apr 30 2020 at 10:43)</a>:</h4>
<p>You don't even need to introduce the abbreviation, just the notation <code>∑</code> should be enough.</p>



<a name="195822247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822247">(Apr 30 2020 at 10:43)</a>:</h4>
<p>Ah, yes, the other refactor. Time for regexps, yes.</p>



<a name="195822261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822261">(Apr 30 2020 at 10:43)</a>:</h4>
<p>Or do we just introduce the notation, but not use it in the file...</p>



<a name="195824749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195824749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195824749">(Apr 30 2020 at 11:12)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2571" title="https://github.com/leanprover-community/mathlib/issues/2571">#2571</a></p>



<a name="195825145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195825145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195825145">(Apr 30 2020 at 11:18)</a>:</h4>
<p>If I change the notation to</p>
<div class="codehilite"><pre><span></span><code><span class="n">localized</span> <span class="s2">&quot;notation `∑` binders ` in ` s `, ` r:(scoped f, finset.sum s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders ` in ` s `, ` r:(scoped f, finset.prod s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>

<span class="n">localized</span> <span class="s2">&quot;notation `∑` binders `, ` r:(scoped f, finset.univ.sum f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders `, ` r:(scoped f, finset.univ.prod f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
</code></pre></div>


<p>then the second set of notation is not used in the tactic state. That's unfortunate. Is there some incantation that can move Lean to do a better job?</p>



<a name="195827375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195827375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195827375">(Apr 30 2020 at 11:43)</a>:</h4>
<p>I've never really understood how priorities work for notation. Can that be used here?</p>



<a name="195869512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195869512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195869512">(Apr 30 2020 at 16:57)</a>:</h4>
<p>Now that the <code>tsum</code> notation has been changed to <code>∑'</code>, I'm ready to start building a PR that introduces the notation above. Except that this notation doesn't really work yet. So what should I do? Introduce <code>fintype.sum</code> and <code>fintype.prod</code>?</p>



<a name="195939011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195939011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195939011">(May 01 2020 at 07:49)</a>:</h4>
<p>From looking at the source code, the reverse lookups for notation <code>head_map&lt;notation_entry&gt; notation_state::m_inv_map</code> are stored without priority, since <code>head_map&lt;V&gt;</code> derives from <code>head_map_prio&lt;V, constant_priority_fn&lt;V&gt;&gt;</code></p>



<a name="195939873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195939873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195939873">(May 01 2020 at 08:06)</a>:</h4>
<p>In fact, according to the debugger the only notation returned for <code>finset.sum</code> is <code>Σ _ in _, _</code></p>



<a name="195940127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195940127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195940127">(May 01 2020 at 08:13)</a>:</h4>
<p>Hmm, but the other does seem to work <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="195940609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195940609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195940609">(May 01 2020 at 08:23)</a>:</h4>
<p>Aha: <code>Σ := finset.univ.sum</code> gets added as notation for the symbol <code>(const lean::head_index &amp;) @0x7ffff49083b8: {m_kind = lean::expr_kind::Macro, m_name = }</code>, and <code>Σ := finset.sum</code> for <code>(const lean::head_index &amp;) @0x7fffdfffd3b8: {m_kind = lean::expr_kind::Constant, m_name = 'finset'.'sum'}</code> (and the second thing is what we probably want)</p>



<a name="195940759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195940759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195940759">(May 01 2020 at 08:26)</a>:</h4>
<p>Hmm... I have a hard time parsing this</p>



<a name="195940969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195940969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195940969">(May 01 2020 at 08:30)</a>:</h4>
<p>I think Anne tells you to avoid the dot notation.</p>



<a name="195940982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195940982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195940982">(May 01 2020 at 08:30)</a>:</h4>
<p>Aha.. you mean in the definition of the notation?</p>



<a name="195941080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941080">(May 01 2020 at 08:32)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="195941092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941092">(May 01 2020 at 08:32)</a>:</h4>
<p>Let me try that.</p>



<a name="195941201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941201">(May 01 2020 at 08:34)</a>:</h4>
<p>I think you want to change <code>finset.univ.sum</code> to <code>finset.sum finset.univ</code> and put the line defining <code>finset.sum finset.univ</code> first</p>



<a name="195941232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941232">(May 01 2020 at 08:35)</a>:</h4>
<p>Awesome</p>
<div class="codehilite"><pre><span></span><code><span class="n">localized</span> <span class="s2">&quot;notation `∑` binders `, ` r:(scoped f, finset.sum finset.univ f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders `, ` r:(scoped f, finset.prod finset.univ f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>

<span class="n">localized</span> <span class="s2">&quot;notation `∑` binders ` in ` s `, ` r:(scoped f, finset.sum s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders ` in ` s `, ` r:(scoped f, finset.prod s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
</code></pre></div>


<p>works. And the order <em>is</em> important.</p>



<a name="195941615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941615">(May 01 2020 at 08:43)</a>:</h4>
<p>This is great! I just fixed this in the <code>chev-warn</code> branch. Now I have some work to do to explain all of this to mathlib (-;</p>



<a name="195941698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941698">(May 01 2020 at 08:45)</a>:</h4>
<p>The explanation, as far as I understand it: when deciding how to pretty-print an expression, Lean looks up the notations associated to the head of the expression (e.g. <code>finset.sum</code>). It tries them one by one, until it finds a notation that matches the expression, then uses that to pretty-print. The order in which they are tried is the order in which they are stored in the environment structure, which in this case is the order in which they are defined. Apparently the priority information is thrown away (typically it would be highest-priority first, then by order of definition). This is why the order matters.</p>
<p>A notation definition is associated to the head of the expression it expands to, so <code>notation </code>∑<code> binders </code>, <code> r:(scoped f, finset.sum finset.univ f) := r</code> is associated to the head of the expansion of <code>r</code>, which is the head of <code>finset.sum finset.univ f</code>, which is <code>finset.sum</code>. But <code>finset.univ.sum</code> doesn't get expanded to <code>finset.sum finset.univ</code> at that point (maybe because it won't know if there is also a namespace <code>finset.univ</code> floating around somewhere?), so you have to write <code>finset.sum finset.univ</code> instead of <code>finset.univ.sum</code>.</p>



<a name="195941766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941766">(May 01 2020 at 08:46)</a>:</h4>
<p>Thanks a lot for explaining this!</p>



<a name="195941773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941773">(May 01 2020 at 08:46)</a>:</h4>
<p>Homework for Johan: write that long overdue <code>docs/extras/notations.md</code></p>



<a name="195941819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941819">(May 01 2020 at 08:47)</a>:</h4>
<p>notations don't go through name resolution until they are used, I think</p>



<a name="195941833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941833">(May 01 2020 at 08:47)</a>:</h4>
<p>/me has lots of homework</p>



<a name="195941888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941888">(May 01 2020 at 08:48)</a>:</h4>
<p>But we could start by just dumping Anne's explanation in that file. At least that would be a canonical place to find it again.</p>



<a name="195941895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941895">(May 01 2020 at 08:48)</a>:</h4>
<p>And then we can slowly improve that file.</p>



<a name="195941910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941910">(May 01 2020 at 08:49)</a>:</h4>
<p>Your sum notations also make great examples.</p>



<a name="195942154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942154">(May 01 2020 at 08:52)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2581" title="https://github.com/leanprover-community/mathlib/issues/2581">#2581</a></p>



<a name="195942165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942165">(May 01 2020 at 08:53)</a>:</h4>
<p>This is not ready for merging. And I welcome everyone to contribute.</p>



<a name="195942522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942522">(May 01 2020 at 08:59)</a>:</h4>
<p>I think there is some lookup of names going on at the point of definition though, if you define a notation before a name:</p>
<div class="codehilite"><pre><span></span><code><span class="n">noncomputable</span> <span class="n">theory</span>

<span class="kn">structure</span> <span class="n">foo</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="kn">notation</span> <span class="bp">`</span><span class="err">☹</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">foo</span><span class="bp">.</span><span class="n">munge</span>

<span class="n">def</span> <span class="n">foo</span><span class="bp">.</span><span class="n">munge</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span>

<span class="kn">notation</span> <span class="bp">`</span><span class="err">☺</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">foo</span><span class="bp">.</span><span class="n">munge</span>

<span class="n">def</span> <span class="n">bar1</span> <span class="o">:=</span> <span class="err">☹</span> <span class="c1">-- unknown identifier `foo.munge`</span>
<span class="n">def</span> <span class="n">bar2</span> <span class="o">:=</span> <span class="err">☺</span>
</code></pre></div>



<a name="195942635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942635">(May 01 2020 at 09:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113488-general/topic/big.20ops/near/195941698" title="#narrow/stream/113488-general/topic/big.20ops/near/195941698">said</a>:</p>
<blockquote>
<p>The explanation, as far as I understand it: when deciding how to pretty-print an expression, Lean looks up the notations associated to the head of the expression (e.g. <code>finset.sum</code>). It tries them one by one, until it finds a notation that matches the expression, then uses that to pretty-print. The order in which they are tried is the order in which they are stored in the environment structure, which in this case is the order in which they are defined. Apparently the priority information is thrown away (typically it would be highest-priority first, then by order of definition). This is why the order matters.</p>
</blockquote>
<p>This is very helpful, thanks. It explains why what I suggested at <a href="#narrow/stream/113488-general/topic/Show.20the.20objects.20for.20an.20equality.20of.20morphisms/near/194957595" title="#narrow/stream/113488-general/topic/Show.20the.20objects.20for.20an.20equality.20of.20morphisms/near/194957595">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Show.20the.20objects.20for.20an.20equality.20of.20morphisms/near/194957595</a> did not work.</p>



<a name="195942696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942696">(May 01 2020 at 09:02)</a>:</h4>
<p>I guess I was mixing up the method for resolving an overloaded notation (two different meanings for <code>a # b</code>) with the method for choosing a notation for the pretty-printer to display (two different notations for <code>nat.add a b</code>).</p>



<a name="195942880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942880">(May 01 2020 at 09:04)</a>:</h4>
<p>We still need <code>tikzcd</code> integration into the Lean tactic state</p>



<a name="195942947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942947">(May 01 2020 at 09:05)</a>:</h4>
<p>How hard do you think it would be to use priority or at least prefer local notation over global notation in the pretty printer?</p>



<a name="195943105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195943105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195943105">(May 01 2020 at 09:07)</a>:</h4>
<p>I think it shouldn't be too hard, since we already have a priority and a priority map</p>



<a name="195943285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195943285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195943285">(May 01 2020 at 09:10)</a>:</h4>
<p>Looks like the code was written before priorities were available, so it seems like not a deliberate decision to leave out priorities here</p>



<a name="195945519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195945519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195945519">(May 01 2020 at 09:46)</a>:</h4>
<p>Small complication: looks like priority for <code>notation_entry</code> is always set to a <code>#define</code>d value of 1000</p>



<a name="195949192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195949192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195949192">(May 01 2020 at 10:41)</a>:</h4>
<p>It turns out that <code>@[priority]</code> and <code>set_option default_priority</code> don't interact with <code>notation</code>, but <code>notation [priority 1]</code> works as expected. PR made: <a href="https://github.com/leanprover-community/lean/pull/207" title="https://github.com/leanprover-community/lean/pull/207">https://github.com/leanprover-community/lean/pull/207</a></p>



<a name="195950458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950458">(May 01 2020 at 10:58)</a>:</h4>
<p>Cool. Thanks!</p>



<a name="195950565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950565">(May 01 2020 at 11:00)</a>:</h4>
<p><span class="user-mention" data-user-id="238446">@Anne Baanen</span> Does this also fix the problem that I currently need to write</p>
<div class="codehilite"><pre><span></span><code><span class="o">(</span><span class="err">∏</span> <span class="n">x</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">...</span>
</code></pre></div>


<p>because otherwise it gets parsed as</p>
<div class="codehilite"><pre><span></span><code><span class="err">∏</span> <span class="n">x</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">...</span><span class="o">)</span>
</code></pre></div>



<a name="195950635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950635">(May 01 2020 at 11:01)</a>:</h4>
<p>This use of <code>in</code> in notation hurts my brain. I noticed it in some filter stuff too.</p>



<a name="195950697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950697">(May 01 2020 at 11:02)</a>:</h4>
<p>I always expect <code>in</code> to be a keyword...</p>



<a name="195950760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950760">(May 01 2020 at 11:03)</a>:</h4>
<p>Maybe I can use <code>\mem</code>. Let me try.</p>



<a name="195950840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950840">(May 01 2020 at 11:04)</a>:</h4>
<p>Nope... that doesn't work.</p>



<a name="195950856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950856">(May 01 2020 at 11:05)</a>:</h4>
<p>I guess <code>binders</code> has special support for <code>\in</code> and doesn't want you to mess around with it.</p>



<a name="195950878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950878">(May 01 2020 at 11:05)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> Do you have another suggestion?</p>



<a name="195950887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950887">(May 01 2020 at 11:05)</a>:</h4>
<p>I don't think <code>binders</code> has <em>special</em> support for <code>\in</code> per se</p>



<a name="195950948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950948">(May 01 2020 at 11:06)</a>:</h4>
<p>Maybe I can just get used to <code>in</code>.</p>



<a name="195950983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950983">(May 01 2020 at 11:06)</a>:</h4>
<p>The change shouldn't affect the parser, (un)fortunately.</p>



<a name="195951126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195951126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195951126">(May 01 2020 at 11:09)</a>:</h4>
<p>Oh maybe it wasn't filters actually. There is <code>in</code> in the snippet from the perfectoid space project in Kevin's paper and I can't parse it.</p>



<a name="195951250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195951250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195951250">(May 01 2020 at 11:11)</a>:</h4>
<p>They are also in filters</p>



<a name="195951262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195951262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195951262">(May 01 2020 at 11:11)</a>:</h4>
<p>In the eventually and frequently notations</p>



<a name="195951322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195951322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195951322">(May 01 2020 at 11:12)</a>:</h4>
<p>BTW I think I saw <code>let ... in</code> is no longer the syntax in Lean 4 anyways</p>



<a name="195955802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195955802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195955802">(May 01 2020 at 12:25)</a>:</h4>
<p>I wonder why in lean-homotopy-theory I get nice <code>∘</code> notation for my morphism composition...</p>



<a name="195955852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195955852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195955852">(May 01 2020 at 12:26)</a>:</h4>
<p>I have <code>local notation f ` ∘ `:80 g:80 := g ≫ f</code>, and that is enough to make it work fine</p>



<a name="195957687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195957687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195957687">(May 01 2020 at 12:52)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2582" title="https://github.com/leanprover-community/mathlib/issues/2582">#2582</a> introduces the notation and uses it everywhere in <code>algebra/big_operators</code>.</p>



<a name="195957703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195957703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195957703">(May 01 2020 at 12:52)</a>:</h4>
<p>I haven't gone through all of mathlib. But I hope we can transition organically.</p>



<a name="195958010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195958010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195958010">(May 01 2020 at 12:57)</a>:</h4>
<p>But let's first see whether CI likes this</p>



{% endraw %}

<hr><p>Last updated: May 01 2020 at 14:05 UTC</p>